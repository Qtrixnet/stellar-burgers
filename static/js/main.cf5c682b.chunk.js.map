{"version":3,"sources":["components/app-header/app-header.module.css","components/ingredient/ingredient.module.css","components/app-header/app-header.jsx","utils/get-coords.js","components/ingredient/ingredient.jsx","components/burger-ingredients/burger-ingredients.jsx","utils/compare-coords.js","utils/Api.js","utils/constants.js","services/actions/order.js","components/burger-constructor/burger-constructor.jsx","components/main/main.jsx","images/done.gif","components/order-details/order-details.jsx","components/ingredient-details/ingredient-details.jsx","components/modal-overlay/modal-overlay.jsx","components/modal/modal.jsx","components/loader/loader.jsx","services/actions/ingredients.js","components/app/app.jsx","services/reducers/ingredients.js","services/reducers/order.js","services/actions/popup.js","services/reducers/popup.js","services/reducers/index.js","index.js","components/burger-ingredients/burger-ingredients.module.css","components/ingredient-details/ingredient-details.module.css","components/burger-constructor/burger-constructor.module.css","components/modal/modal.module.css","components/order-details/order-details.module.css","components/main/main.module.css","components/app/app.module.css","components/modal-overlay/modal-overlay.module.css","components/loader/loader.module.css"],"names":["module","exports","AppHeader","className","headerStyles","header","headerContainer","list","link_active","link","to","type","logo","profile","getCoords","elem","box","getBoundingClientRect","top","Math","round","scrollY","left","scrollX","Ingredient","ingredient","image","price","name","_id","dispatch","useDispatch","chosenIngredients","useSelector","state","ingredientsData","initialIngredients","ingredients","useDrag","item","collect","monitor","isDrag","isDragging","dragRef","console","log","ingredientCounter","forEach","onClick","evt","targetIngredient","find","currentTarget","dataset","id","selectedBun","selectedBunIndex","indexOf","chosenIngredientsClone","slice","splice","payload","onContextMenu","preventDefault","foundIngredient","ingredientStyles","list_item","moving","ref","alt","src","price_info","text","count","size","hint_icons","left_click_icon","right_click_icon","drag_icon","BurgerIngredients","useState","current","setCurrent","handleTabClick","document","querySelector","scrollIntoView","block","behavior","burgerIngredientsStyle","main_container","style","display","value","active","onScroll","target","addEventListener","bunTitleTopCoords","sauceTitleTopCoords","mainTitleTopCoords","mainContainerTopCoords","absoluteCoords","title","abs","coordsValues","map","coord","minValue","min","compareCoords","ingredients_container","mainApi","data","this","_baseUrl","res","ok","json","Promise","reject","status","statusText","fetch","then","_requestResult","ingredientsIds","burgerData","method","headers","body","JSON","stringify","GET_ORDER_DATA","GET_ORDER_DATA_FAILED","GET_ORDER_DATA_SUCCESS","DELETE_ORDER_DATA","BurgerConstructor","onDropHandler","totalSumm","useMemo","reduce","acc","cur","useDrop","accept","drop","ingredientId","isHover","isOver","dropTarget","borderColor","bunElementHandler","property","trueValue","falseValue","DndProvider","backend","HTML5Backend","burgerConstructorStyle","constructor_container","constructor_element","length","isLocked","thumbnail","idx","handleClose","e","selectedIngredientIndex","button_container","disabled","sendIngredients","catch","err","getOrderData","Main","mainStyles","main","OrderDetails","orderData","orderDetails","orderDetailsStyles","container","order","number","doneGif","success","IngredientDetails","selectedIngredient","ingredientDetailsStyles","width","height","listItem","calories","proteins","fat","carbohydrates","ModalOverlay","isOrderDetailsPopupOpen","popupState","modalOverlayStyles","overlay","Modal","children","modalRoot","getElementById","useEffect","handleEscapeClose","key","removeEventListener","createPortal","modalStyles","closeButton","Loader","loaderStyles","loader","GET_INGREDIENTS","GET_INGREDIENTS_FAILED","GET_INGREDIENTS_SUCCESS","SELECT_INGREDIENT","DELETE_SELECTED_INGREDIENT","ADD_INGREDIENT","DELETE_INGREDIENT","CHANGE_INGREDIENT_DRAG_STATE","App","isIngredientsPopupOpen","ingredientsRequest","getIngredients","appStyles","app","initialState","ingredientsFailed","isElementDrag","orderRequest","orderFailed","CHANGE_ORDER_DETAILS_POPUP_STATE","CHANGE_INGREDIENTS_POPUP_STATE","rootReducer","combineReducers","action","enhancer","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","applyMiddleware","thunk","store","createStore","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.cf5c682b.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"app-header_header__2Najp\",\"headerContainer\":\"app-header_headerContainer__sH8CK\",\"profile\":\"app-header_profile__46wYZ\",\"logo\":\"app-header_logo__2b8ll\",\"link\":\"app-header_link__1v2QL\",\"link_active\":\"app-header_link_active__m5wx3\",\"list\":\"app-header_list__NmE0n\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"list_item\":\"ingredient_list_item__diaq-\",\"moving\":\"ingredient_moving__5edZ5\",\"hint_icons\":\"ingredient_hint_icons__rU8J1\",\"left_click_icon\":\"ingredient_left_click_icon__4SqWB\",\"right_click_icon\":\"ingredient_right_click_icon__2NAn6\",\"drag_icon\":\"ingredient_drag_icon__mpW7A\",\"image\":\"ingredient_image__gLmz8\",\"price_info\":\"ingredient_price_info__1IWXs\",\"text\":\"ingredient_text__cAlDL\"};","import { NavLink, Link } from 'react-router-dom';\r\nimport { Logo, BurgerIcon, ListIcon, ProfileIcon } from '@ya.praktikum/react-developer-burger-ui-components'\r\nimport headerStyles from './app-header.module.css';\r\n\r\nfunction AppHeader() {\r\n  return (\r\n    <header className={`${headerStyles.header} text text_type_main-default pt-4 pb-4`}>\r\n      <div className={headerStyles.headerContainer}>\r\n      <nav>\r\n        <ul className={headerStyles.list}>\r\n          <li>\r\n            <NavLink className={`pt-5 pr-5 pb-5 ${headerStyles.link_active} ${headerStyles.link}`} to=\"/\">\r\n              <BurgerIcon type=\"primary\" />\r\n              <span className={`ml-2`}>Конструктор</span>\r\n            </NavLink>\r\n          </li>\r\n          <li>\r\n            <NavLink className={`p-5 ${headerStyles.link}`} to=\"/\">\r\n              <ListIcon type=\"secondary\" />\r\n              <span className={`ml-2`}>Лента заказов</span>\r\n            </NavLink>\r\n          </li>\r\n        </ul>\r\n      </nav>\r\n      <div className={headerStyles.logo}>\r\n        <Logo />\r\n      </div>\r\n      <Link className={`p-5 ${headerStyles.link} ${headerStyles.profile}`} to=\"/\">\r\n        <ProfileIcon type=\"secondary\" />\r\n        <span className={`ml-2`}>Личный кабинет</span>\r\n      </Link>\r\n      </div>\r\n    </header >\r\n  );\r\n}\r\n\r\nexport default AppHeader;\r\n","/* eslint-disable no-restricted-globals */\r\nexport const getCoords = (elem) => {\r\n  let box = elem.getBoundingClientRect();\r\n\r\n  return {\r\n    top: Math.round(box.top + scrollY),\r\n    left: Math.round(box.left + scrollX)\r\n  };\r\n}","import ingredientStyles from './ingredient.module.css';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { CurrencyIcon, Counter } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { useDrag } from \"react-dnd\";\r\n\r\nfunction Ingredient({ ingredient }) {\r\n  const { image, price, name, _id } = ingredient;\r\n\r\n  const dispatch = useDispatch();\r\n  const chosenIngredients = useSelector(state => state.ingredientsData.chosenIngredients);\r\n  const initialIngredients = useSelector(state => state.ingredientsData.ingredients);\r\n\r\n  const [{ isDrag }, dragRef] = useDrag({\r\n    type: \"ingredient\",\r\n    item: { _id },\r\n    collect: monitor => ({\r\n      isDrag: monitor.isDragging(),\r\n    })\r\n  });\r\n\r\n  console.log(isDrag)\r\n\r\n  let ingredientCounter = 0;\r\n\r\n  chosenIngredients.forEach(ingredient => ingredient.name === name && (ingredient.type === 'bun' ? ingredientCounter += 2 : ingredientCounter += 1))\r\n\r\n  const handleChoseIngredient = (evt) => {\r\n    const targetIngredient = initialIngredients.find(ingredient => ingredient._id === evt.currentTarget.dataset.id)\r\n    const selectedBun = chosenIngredients.find(ingredient => ingredient.type === 'bun')\r\n    const selectedBunIndex = chosenIngredients.indexOf(selectedBun)\r\n\r\n    if (targetIngredient.type === 'bun' && selectedBun) {\r\n      const chosenIngredientsClone = chosenIngredients.slice();\r\n      chosenIngredientsClone.splice(selectedBunIndex, 1, targetIngredient);\r\n      dispatch({ type: 'ADD_INGREDIENT', payload: [...chosenIngredientsClone] });\r\n    } else {\r\n      dispatch({ type: 'ADD_INGREDIENT', payload: [...chosenIngredients, targetIngredient] });\r\n    }\r\n  }\r\n\r\n  const handleIngredientExplore = (evt) => {\r\n    evt.preventDefault()\r\n    const id = evt.currentTarget.dataset.id\r\n    const foundIngredient = initialIngredients.find(ingredient => ingredient._id === id)\r\n    dispatch({ type: 'SELECT_INGREDIENT', payload: foundIngredient });\r\n    dispatch({ type: 'CHANGE_INGREDIENTS_POPUP_STATE', payload: true });\r\n  }\r\n\r\n  return (\r\n    <li data-id={_id} onClick={handleChoseIngredient} onContextMenu={handleIngredientExplore} className={`${ingredientStyles.list_item} ${isDrag && ingredientStyles.moving}`} ref={dragRef}>\r\n      <img alt={name} src={image} className={`${ingredientStyles.image} ml-4 mr-4`} />\r\n      <div className={`${ingredientStyles.price_info} mt-4 mb-4`}>\r\n        <span className=\"text text_type_digits-default mr-2\">{price}</span>\r\n        <CurrencyIcon type=\"primary\" />\r\n      </div>\r\n      <h3 className={`${ingredientStyles.text} text text_type_main-default`}>{name}</h3>\r\n      {ingredientCounter > 0 && <Counter count={ingredientCounter} size=\"default\" />}\r\n      <div className={`${ingredientStyles.hint_icons}`}>\r\n        <span className={`${ingredientStyles.left_click_icon}`}></span>\r\n        <span className={`${ingredientStyles.right_click_icon}`}></span>\r\n        <span className={`${ingredientStyles.drag_icon}`}></span>\r\n      </div>\r\n    </li>\r\n  )\r\n}\r\n\r\nexport default Ingredient;\r\n","import { useState } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { Tab } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport burgerIngredientsStyle from './burger-ingredients.module.css';\r\nimport { compareCoords } from '../../utils/compare-coords';\r\nimport Ingredient from '../ingredient/ingredient';\r\n\r\nexport default function BurgerIngredients() {\r\n  const initialIngredients = useSelector(state => state.ingredientsData.ingredients)\r\n\r\n  const [current, setCurrent] = useState('bun')\r\n\r\n  const scrollHandler = (evt) => {\r\n    evt.target.addEventListener('scroll', function () {\r\n      setCurrent(compareCoords(burgerIngredientsStyle.main_container))\r\n    });\r\n  }\r\n\r\n  const handleTabClick = (type) => {\r\n    setCurrent(type)\r\n    document.querySelector(`#${type}`).scrollIntoView({ block: \"start\", behavior: \"smooth\" })\r\n  }\r\n\r\n  return (\r\n    <div className={burgerIngredientsStyle.main_container}>\r\n      <h1 className=\"mt-10 mb-5 text text_type_main-large\">Соберите бургер</h1>\r\n      <div style={{ display: 'flex' }}>\r\n        <Tab value=\"bun\" active={current === 'bun'} onClick={handleTabClick}>\r\n          Булки\r\n        </Tab>\r\n        <Tab value=\"sauce\" active={current === 'sauce'} onClick={handleTabClick}>\r\n          Соусы\r\n        </Tab>\r\n        <Tab value=\"main\" active={current === 'main'} onClick={handleTabClick}>\r\n          Начинки\r\n        </Tab>\r\n      </div>\r\n      <div onScroll={scrollHandler} className={`${burgerIngredientsStyle.ingredients_container} mt-10 ingredients-container`}>\r\n        <h2 id=\"bun\" className=\"mb-6 text text_type_main-medium\">\r\n          Булки\r\n        </h2>\r\n        <ul className={`${burgerIngredientsStyle.list} pt-6 pb-10 pr-4 pl-4`}>\r\n          {initialIngredients.map((item) => item.type === 'bun' && <Ingredient key={item._id} ingredient={item} />)}\r\n        </ul>\r\n        <h2 id=\"sauce\" className=\"mb-6 text text_type_main-medium\">\r\n          Соусы\r\n        </h2>\r\n        <ul className={`${burgerIngredientsStyle.list} pt-6 pb-10 pr-4 pl-4`}>\r\n          {initialIngredients.map((item) => item.type === 'sauce' && <Ingredient key={item._id} ingredient={item} />)}\r\n        </ul>\r\n        <h2 id=\"main\" className=\"mb-6 text text_type_main-medium\">\r\n          Начинки\r\n        </h2>\r\n        <ul className={`${burgerIngredientsStyle.list} pt-6 pb-10 pr-4 pl-4`}>\r\n          {initialIngredients.map((item) => item.type === 'main' && <Ingredient key={item._id} ingredient={item} />)}\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  );\r\n};","import { getCoords } from './get-coords'\r\n\r\nexport const compareCoords = (className) => {\r\n  const bunTitleTopCoords = getCoords(document.querySelector('#bun')).top\r\n  const sauceTitleTopCoords = getCoords(document.querySelector('#sauce')).top\r\n  const mainTitleTopCoords = getCoords(document.querySelector('#main')).top\r\n  const mainContainerTopCoords = getCoords(document.querySelector(`.${className}`)).top\r\n\r\n  const absoluteCoords = [\r\n    {\r\n      title: 'bun',\r\n      value: Math.abs(mainContainerTopCoords - bunTitleTopCoords),\r\n    },\r\n    {\r\n      title: 'sauce',\r\n      value: Math.abs(mainContainerTopCoords - sauceTitleTopCoords),\r\n    },\r\n    {\r\n      title: 'main',\r\n      value: Math.abs(mainContainerTopCoords - mainTitleTopCoords)\r\n    },\r\n  ]\r\n\r\n  const coordsValues = absoluteCoords.map(coord => coord.value)\r\n  const minValue = Math.min(...coordsValues)\r\n  const targetBlockTitle = absoluteCoords.find(coord => coord.value === minValue).title\r\n\r\n  return targetBlockTitle\r\n}","import { BASE_URL } from '../utils/constants'\r\n\r\n//* Класс для взаимодействия с сервером\r\nclass Api {\r\n  constructor(data) {\r\n    this._baseUrl = data;\r\n  }\r\n\r\n  //* Проверка статуса запроса\r\n  _requestResult(res) {\r\n    if (res.ok) {\r\n      return res.json();\r\n    } else {\r\n      return Promise.reject(\r\n        `Что-то пошло не так: Ошибка ${res.status} - ${res.statusText}`\r\n      );\r\n    }\r\n  }\r\n\r\n  //* Запрос данных \r\n  getIngredients() {\r\n    return fetch(`${this._baseUrl}/ingredients`).then((res) => this._requestResult(res));\r\n  }\r\n\r\n  sendIngredients(ingredientsIds) {\r\n    const burgerData = {\r\n      'ingredients': ingredientsIds\r\n    }\r\n\r\n    return fetch(`${this._baseUrl}/orders`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json;charset=utf-8'\r\n      },\r\n      body: JSON.stringify(burgerData)\r\n    }).then((res) => this._requestResult(res));\r\n  }\r\n}\r\n\r\nconst mainApi = new Api(BASE_URL);\r\n\r\nexport default mainApi;","export const BASE_URL = 'https://norma.nomoreparties.space/api'\r\n","import mainApi from '../../utils/Api';\r\n\r\nexport const GET_ORDER_DATA = 'GET_ORDER_DATA';\r\nexport const GET_ORDER_DATA_FAILED = 'GET_ORDER_DATA_FAILED';\r\nexport const GET_ORDER_DATA_SUCCESS = 'GET_ORDER_DATA_SUCCESS';\r\nexport const DELETE_ORDER_DATA = 'DELETE_ORDER_DATA'\r\n\r\nexport function getOrderData(ingredientsIds) {\r\n  return function (dispatch) {\r\n    dispatch({\r\n      type: GET_ORDER_DATA,\r\n    })\r\n\r\n    mainApi.sendIngredients(ingredientsIds)\r\n      .then(data => {\r\n        if (data) {\r\n          dispatch({\r\n            type: GET_ORDER_DATA_SUCCESS,\r\n            payload: data\r\n          })\r\n          // dispatch({ type: 'CHANGE_ORDER_DETAILS_POPUP_STATE', payload: true })\r\n        }\r\n      })\r\n      .catch(err => dispatch({\r\n        type: GET_ORDER_DATA_FAILED\r\n      }))\r\n  }\r\n}","import { useMemo } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { DragIcon, ConstructorElement, Button, CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport burgerConstructorStyle from './burger-constructor.module.css';\r\nimport { getOrderData } from '../../services/actions/order'\r\nimport { useDrop } from \"react-dnd\";\r\nimport { DndProvider } from 'react-dnd';\r\nimport { HTML5Backend } from 'react-dnd-html5-backend';\r\n\r\nexport default function BurgerConstructor({ onDropHandler }) {\r\n  const dispatch = useDispatch();\r\n  const chosenIngredients = useSelector(state => state.ingredientsData.chosenIngredients);\r\n\r\n  const totalSumm = useMemo(() => chosenIngredients.reduce((acc, cur) => cur.type === 'bun' ? acc + (cur.price * 2) : acc + cur.price, 0), [chosenIngredients])\r\n\r\n  const [{ isHover }, dropTarget] = useDrop({\r\n    accept: \"ingredient\",\r\n    drop(ingredientId) {\r\n      onDropHandler(ingredientId);\r\n    },\r\n    collect: monitor => ({\r\n      isHover: monitor.isOver(),\r\n    })\r\n  });\r\n\r\n  const borderColor = isHover ? '#5147F8' : 'transparent';\r\n\r\n  const handleOrderButtonClick = () => {\r\n    const ingredientsIds = chosenIngredients.map(ingredient => ingredient._id)\r\n    dispatch(getOrderData(ingredientsIds))\r\n    dispatch({ type: 'CHANGE_ORDER_DETAILS_POPUP_STATE', payload: true })\r\n  }\r\n\r\n  const handleDeleteIngredient = (item) => (e) => {\r\n    const selectedIngredientIndex = chosenIngredients.indexOf(item)\r\n    const chosenIngredientsClone = chosenIngredients.slice();\r\n    chosenIngredientsClone.splice(selectedIngredientIndex, 1);\r\n    dispatch({ type: 'DELETE_INGREDIENT', payload: chosenIngredientsClone });\r\n  }\r\n\r\n  const bunElementHandler = (chosenIngredients, property, trueValue, falseValue) => chosenIngredients.find(ingredient => ingredient.type === 'bun') ? `${(chosenIngredients.find(ingredient => ingredient.type === 'bun'))[property]} ${trueValue}` : falseValue\r\n\r\n  return (\r\n    <DndProvider backend={HTML5Backend}>\r\n      <div ref={dropTarget} style={{ borderColor }} className={`${burgerConstructorStyle.constructor_container} mt-25 pt-5 pb-5`}>\r\n        <div className={`${burgerConstructorStyle.constructor_element} pr-5`}>\r\n          {\r\n            chosenIngredients.length > 0 ? <ConstructorElement\r\n              type=\"top\"\r\n              isLocked={true}\r\n              text={bunElementHandler(chosenIngredients, 'name', '(верх)', 'Выберите булку')}\r\n              price={bunElementHandler(chosenIngredients, 'price', '', '0')}\r\n              thumbnail={bunElementHandler(chosenIngredients, 'image', '', '')}\r\n\r\n            /> : <p className=\"text text_type_main-large pt-3\">\r\n              Выберите булку\r\n            </p>\r\n          }\r\n        </div>\r\n        <ul className={`${burgerConstructorStyle.list} pl-4 pr-4`}>\r\n          {chosenIngredients.map((ingredient, idx) =>\r\n            ingredient.type !== 'bun' && <li key={`${ingredient._id}${idx}`} className={burgerConstructorStyle.list_item}>\r\n              <DragIcon />\r\n              <ConstructorElement\r\n                text={ingredient.name}\r\n                price={ingredient.price}\r\n                thumbnail={ingredient.image}\r\n                handleClose={handleDeleteIngredient(ingredient)}\r\n              />\r\n            </li>\r\n          )}\r\n        </ul>\r\n        <div className=\"pr-5\">\r\n          {\r\n            chosenIngredients.length > 0 && <ConstructorElement\r\n              type=\"bottom\"\r\n              isLocked={true}\r\n              text={bunElementHandler(chosenIngredients, 'name', '(низ)', 'Выберите булку')}\r\n              price={bunElementHandler(chosenIngredients, 'price', '', '0')}\r\n              thumbnail={bunElementHandler(chosenIngredients, 'image', '', '')}\r\n            />\r\n          }\r\n        </div>\r\n\r\n        <div className={`${burgerConstructorStyle.button_container} pt-5 pr-5`}>\r\n          <div className='mr-10'>\r\n            <span className=\"text text_type_digits-medium mr-2\">{totalSumm}</span>\r\n            <CurrencyIcon type=\"primary\" />\r\n          </div>\r\n          <Button disabled={chosenIngredients.length > 0 ? false : true} onClick={handleOrderButtonClick} className=\"pt-10\" type=\"primary\" size=\"medium\">\r\n            Оформить заказ\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </DndProvider>\r\n  );\r\n};","import { useDispatch, useSelector } from 'react-redux';\r\nimport BurgerIngredients from '../burger-ingredients/burger-ingredients';\r\nimport BurgerConstructor from '../burger-constructor/burger-constructor';\r\nimport mainStyles from './main.module.css';\r\nimport { DndProvider } from \"react-dnd\";\r\nimport { HTML5Backend } from \"react-dnd-html5-backend\";\r\n\r\nexport default function Main() {\r\n  const dispatch = useDispatch();\r\n  const chosenIngredients = useSelector(state => state.ingredientsData.chosenIngredients);\r\n  const initialIngredients = useSelector(state => state.ingredientsData.ingredients);\r\n\r\n  const handleDrop = (ingredientId) => {\r\n    const targetIngredient = initialIngredients.find(ingredient => ingredient._id === ingredientId._id)\r\n    const selectedBun = chosenIngredients.find(ingredient => ingredient.type === 'bun')\r\n    const selectedBunIndex = chosenIngredients.indexOf(selectedBun)\r\n\r\n    if (targetIngredient.type === 'bun' && selectedBun) {\r\n      const chosenIngredientsClone = chosenIngredients.slice();\r\n      chosenIngredientsClone.splice(selectedBunIndex, 1, targetIngredient);\r\n      dispatch({ type: 'ADD_INGREDIENT', payload: [...chosenIngredientsClone] });\r\n    } else {\r\n      dispatch({ type: 'ADD_INGREDIENT', payload: [...chosenIngredients, targetIngredient] });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <main className={mainStyles.main}>\r\n      <DndProvider backend={HTML5Backend}>\r\n        <section className={mainStyles.main_container}>\r\n          <BurgerIngredients />\r\n          <BurgerConstructor onDropHandler={handleDrop} />\r\n        </section>\r\n      </DndProvider>\r\n    </main>\r\n  );\r\n};\r\n","export default __webpack_public_path__ + \"static/media/done.cc5a59a7.gif\";","import { useSelector } from 'react-redux';\r\nimport orderDetailsStyles from './order-details.module.css';\r\nimport doneGif from '../../images/done.gif';\r\n\r\nexport default function OrderDetails() {\r\n  const orderData = useSelector(state => state.orderData.orderDetails);\r\n  return (\r\n    <div className={`${orderDetailsStyles.container}`}>\r\n      <h3 className={`text text_type_digits-large pt-10 ${orderDetailsStyles.title}`}>{orderData.order.number}</h3>\r\n      <p className=\"text text_type_main-medium pt-8 pb-15\">\r\n        идентификатор заказа\r\n      </p>\r\n      <img className=\"pb-15\" src={doneGif} alt=\"чекаут\" />\r\n      <p className={`text text_type_main-default pb-2 ${orderDetailsStyles.text}`}>\r\n        {orderData.success ? `Ваш '${orderData.name}' начали готовить` : 'Ваш заказ в очереди на приготовление'}\r\n      </p>\r\n      {orderData.success && (<p className=\"text text_type_main-default text_color_inactive pb-15\">\r\n        Дождитесь готовности на орбитальной станции\r\n      </p>)}\r\n    </div>\r\n  );\r\n};\r\n","\r\nimport { useSelector } from 'react-redux';\r\nimport ingredientDetailsStyles from './ingredient-details.module.css';\r\n\r\nexport default function IngredientDetails() {\r\n  const selectedIngredient = useSelector(state => state.ingredientsData.selectedIngredient);\r\n\r\n  return (\r\n    <div className={`${ingredientDetailsStyles.container}`}>\r\n      <img width=\"480\" height=\"240\" alt={selectedIngredient.name} src={selectedIngredient && selectedIngredient.image} />\r\n      <p className=\"text text_type_main-medium pt-4 pb-8\">{selectedIngredient && selectedIngredient.name}</p>\r\n      <ul className={`${ingredientDetailsStyles.list} pt-8`}>\r\n        <li className={`${ingredientDetailsStyles.listItem} text text_type_main-default text_color_inactive`}>\r\n          <span>\r\n            Калории,ккал\r\n          </span>\r\n          {selectedIngredient.calories}\r\n        </li>\r\n        <li className={`${ingredientDetailsStyles.listItem} text text_type_main-default text_color_inactive`}>\r\n          <span>\r\n            Белки, г\r\n          </span>\r\n          {selectedIngredient.proteins}\r\n        </li>\r\n        <li className={`${ingredientDetailsStyles.listItem} text text_type_main-default text_color_inactive`}>\r\n          <span>\r\n            Жиры, г\r\n          </span>\r\n          {selectedIngredient.fat}\r\n        </li>\r\n        <li className={`${ingredientDetailsStyles.listItem} text text_type_main-default text_color_inactive`}>\r\n          <span>\r\n            Углеводы, г\r\n          </span>\r\n          {selectedIngredient.carbohydrates}\r\n        </li>\r\n      </ul>\r\n    </div>\r\n  );\r\n};\r\n","import { useDispatch, useSelector } from 'react-redux';\r\nimport modalOverlayStyles from './modal-overlay.module.css';\r\n\r\nexport default function ModalOverlay() {\r\n  const dispatch = useDispatch();\r\n  const isOrderDetailsPopupOpen = useSelector(state => state.popupState.isOrderDetailsPopupOpen);\r\n\r\n  const overlayClickHandler = () => {\r\n    isOrderDetailsPopupOpen ? dispatch({ type: 'CHANGE_ORDER_DETAILS_POPUP_STATE', payload: false }) : dispatch({ type: 'CHANGE_INGREDIENTS_POPUP_STATE', payload: false });\r\n    isOrderDetailsPopupOpen ? dispatch({ type: 'DELETE_ORDER_DATA' }) : dispatch({ type: 'DELETE_SELECTED_INGREDIENT' })\r\n  }\r\n\r\n  return (\r\n    <div onClick={overlayClickHandler} className={modalOverlayStyles.overlay}>\r\n    </div>\r\n  );\r\n};","import { useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport modalStyles from './modal.module.css';\r\nimport { CloseIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { createPortal } from 'react-dom';\r\nimport PropTypes from 'prop-types';\r\nimport ModalOverlay from '../modal-overlay/modal-overlay';\r\n\r\nexport default function Modal({ children, title = '' }) {\r\n  const dispatch = useDispatch();\r\n  const modalRoot = document.getElementById(\"react-modals\");\r\n  const isOrderDetailsPopupOpen = useSelector(state => state.popupState.isOrderDetailsPopupOpen);\r\n\r\n  useEffect(() => {\r\n    const handleEscapeClose = (evt) => {\r\n      if (evt.key === 'Escape') {\r\n        isOrderDetailsPopupOpen ? dispatch({ type: 'CHANGE_ORDER_DETAILS_POPUP_STATE', payload: false }) : dispatch({ type: 'CHANGE_INGREDIENTS_POPUP_STATE', payload: false });\r\n        isOrderDetailsPopupOpen ? dispatch({ type: 'DELETE_ORDER_DATA' }) : dispatch({ type: 'DELETE_SELECTED_INGREDIENT' })\r\n      };\r\n    };\r\n\r\n    document.addEventListener('keyup', handleEscapeClose);\r\n    return () => {\r\n      document.removeEventListener('keyup', handleEscapeClose);\r\n    };\r\n  }, [dispatch, isOrderDetailsPopupOpen])\r\n\r\n  const closeButtonClickHandler = () => {\r\n    isOrderDetailsPopupOpen ? dispatch({ type: 'CHANGE_ORDER_DETAILS_POPUP_STATE', payload: false }) : dispatch({ type: 'CHANGE_INGREDIENTS_POPUP_STATE', payload: false });\r\n    isOrderDetailsPopupOpen ? dispatch({ type: 'DELETE_ORDER_DATA' }) : dispatch({ type: 'DELETE_SELECTED_INGREDIENT' })\r\n  }\r\n\r\n  return createPortal(\r\n    <>\r\n      <div className={`${modalStyles.container} pt-15 pr-10 pl-10 pb-15`}>\r\n        <header className={modalStyles.header}>\r\n          {title && (<h2 className={`${modalStyles.title} text text_type_main-large`}>{title}</h2>)}\r\n          <button onClick={closeButtonClickHandler} className={modalStyles.closeButton}>\r\n            <CloseIcon type=\"primary\" />\r\n          </button>\r\n        </header>\r\n        {children}\r\n      </div>\r\n      <ModalOverlay />\r\n    </>\r\n    , modalRoot\r\n  );\r\n};\r\n\r\nModal.propTypes = {\r\n  children: PropTypes.element.isRequired,\r\n  title: PropTypes.string,\r\n};","import loaderStyles from './loader.module.css';\r\n\r\nexport default function Loader() {\r\n\r\n  return (\r\n    <div className={loaderStyles.loader}>\r\n    </div>\r\n  );\r\n};\r\n","import mainApi from '../../utils/Api';\r\n\r\nexport const GET_INGREDIENTS = 'GET_INGREDIENTS';\r\nexport const GET_INGREDIENTS_FAILED = 'GET_INGREDIENTS_FAILED';\r\nexport const GET_INGREDIENTS_SUCCESS = 'GET_INGREDIENTS_SUCCESS';\r\n\r\nexport const SELECT_INGREDIENT = 'SELECT_INGREDIENT';\r\nexport const DELETE_SELECTED_INGREDIENT = 'DELETE_SELECTED_INGREDIENT';\r\n\r\nexport const ADD_INGREDIENT = 'ADD_INGREDIENT';\r\nexport const DELETE_INGREDIENT = 'DELETE_INGREDIENT';\r\n\r\nexport const CHANGE_INGREDIENT_DRAG_STATE = 'CHANGE_INGREDIENT_DRAG_STATE';\r\n\r\nexport function getIngredients() {\r\n  return function (dispatch) {\r\n    dispatch({\r\n      type: GET_INGREDIENTS,\r\n    })\r\n\r\n    mainApi.getIngredients()\r\n      .then(ingredientsData => {\r\n        if (ingredientsData) {\r\n          dispatch({\r\n            type: GET_INGREDIENTS_SUCCESS,\r\n            payload: ingredientsData.data\r\n          })\r\n        }\r\n      })\r\n      .catch(err => dispatch({\r\n        type: GET_INGREDIENTS_FAILED\r\n      }))\r\n  }\r\n}","import { useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport appStyles from './app.module.css';\r\n\r\nimport AppHeader from '../app-header/app-header';\r\nimport Main from '../main/main';\r\nimport OrderDetails from '../order-details/order-details';\r\nimport IngredientDetails from '../ingredient-details/ingredient-details';\r\nimport Modal from '../modal/modal';\r\nimport Loader from '../loader/loader';\r\nimport { getIngredients } from '../../services/actions/ingredients';\r\n\r\nexport default function App() {\r\n  const orderData = useSelector(state => state.orderData.orderDetails);\r\n  const isIngredientsPopupOpen = useSelector(state => state.popupState.isIngredientsPopupOpen);\r\n  const isOrderDetailsPopupOpen = useSelector(state => state.popupState.isOrderDetailsPopupOpen);\r\n  const ingredientsRequest = useSelector(state => state.ingredientsData.ingredientsRequest);\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    dispatch(getIngredients());\r\n  }, [dispatch])\r\n\r\n  return (\r\n    <div className={`${appStyles.app} pb-10`}>\r\n      {\r\n        ingredientsRequest ? (<Loader />) :\r\n          <>\r\n            <AppHeader />\r\n            <Main />\r\n            {\r\n              isOrderDetailsPopupOpen && (\r\n                <Modal>\r\n                  {orderData ? <OrderDetails /> : <Loader />}\r\n                </Modal>\r\n              )\r\n            }\r\n            {\r\n              isIngredientsPopupOpen && (\r\n                <Modal title='Детали ингредиентов'>\r\n                  <IngredientDetails />\r\n                </Modal>\r\n              )\r\n            }\r\n          </>\r\n      }\r\n    </div >\r\n\r\n  );\r\n};","import {\r\n  GET_INGREDIENTS,\r\n  GET_INGREDIENTS_FAILED,\r\n  GET_INGREDIENTS_SUCCESS,\r\n  SELECT_INGREDIENT,\r\n  ADD_INGREDIENT,\r\n  DELETE_INGREDIENT,\r\n  DELETE_SELECTED_INGREDIENT,\r\n  CHANGE_INGREDIENT_DRAG_STATE,\r\n} from '../actions/ingredients';\r\n\r\n\r\nconst initialState = {\r\n  ingredients: [],\r\n  selectedIngredient: null,\r\n  chosenIngredients: [],\r\n  ingredientsRequest: false,\r\n  ingredientsFailed: false,\r\n  isElementDrag: false,\r\n};\r\n\r\nexport const ingredientsReducer = (state = initialState, action) => {\r\n\r\n  switch (action.type) {\r\n    case CHANGE_INGREDIENT_DRAG_STATE: {\r\n      return {\r\n        ...state,\r\n        isElementDrag: action.payload,\r\n      };\r\n    }\r\n    case GET_INGREDIENTS_FAILED: {\r\n      return {\r\n        ...state,\r\n        ingredientsRequest: false,\r\n        ingredientsFailed: true,\r\n      };\r\n    }\r\n    case GET_INGREDIENTS_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        ingredientsRequest: false,\r\n        ingredients: action.payload,\r\n      };\r\n    }\r\n    case GET_INGREDIENTS: {\r\n      return {\r\n        ...state,\r\n        ingredientsRequest: true,\r\n        ingredientsFailed: false,\r\n      };\r\n    }\r\n    case SELECT_INGREDIENT: {\r\n      return {\r\n        ...state,\r\n        selectedIngredient: action.payload\r\n      };\r\n    }\r\n    case DELETE_SELECTED_INGREDIENT: {\r\n      return {\r\n        ...state,\r\n        selectedIngredient: null\r\n      };\r\n    }\r\n    case ADD_INGREDIENT: {\r\n      return {\r\n        ...state,\r\n        chosenIngredients: action.payload\r\n      };\r\n    }\r\n    case DELETE_INGREDIENT: {\r\n      return { ...state, chosenIngredients: action.payload };\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};","import {\r\n  GET_ORDER_DATA,\r\n  GET_ORDER_DATA_FAILED,\r\n  GET_ORDER_DATA_SUCCESS,\r\n  DELETE_ORDER_DATA\r\n} from '../actions/order';\r\n\r\nconst initialState = {\r\n  orderDetails: null,\r\n  orderRequest: false,\r\n  orderFailed: false,\r\n};\r\n\r\nexport const orderReducer = (state = initialState, action) => {\r\n\r\n  switch (action.type) {\r\n    case GET_ORDER_DATA: {\r\n      return {\r\n        ...state,\r\n        orderRequest: true,\r\n        orderFailed: false,\r\n      };\r\n    }\r\n    case GET_ORDER_DATA_FAILED: {\r\n      return {\r\n        ...state,\r\n        orderRequest: false,\r\n        orderFailed: true,\r\n      };\r\n    }\r\n    case GET_ORDER_DATA_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        orderRequest: false,\r\n        orderDetails: action.payload,\r\n      };\r\n    }\r\n    case DELETE_ORDER_DATA: {\r\n      return {\r\n        ...state,\r\n        orderDetails: null,\r\n      };\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};","export const CHANGE_ORDER_DETAILS_POPUP_STATE = 'CHANGE_ORDER_DETAILS_POPUP_STATE';\r\nexport const CHANGE_INGREDIENTS_POPUP_STATE = 'CHANGE_INGREDIENTS_POPUP_STATE';","import {\r\n  CHANGE_ORDER_DETAILS_POPUP_STATE,\r\n  CHANGE_INGREDIENTS_POPUP_STATE\r\n} from '../actions/popup';\r\n\r\nconst initialState = {\r\n  isOrderDetailsPopupOpen: false,\r\n  isIngredientsPopupOpen: false,\r\n};\r\n\r\nexport const popupReducer = (state = initialState, action) => {\r\n\r\n  switch (action.type) {\r\n    case CHANGE_ORDER_DETAILS_POPUP_STATE: {\r\n      return {\r\n        ...state,\r\n        isOrderDetailsPopupOpen: action.payload,\r\n      };\r\n    }\r\n    case CHANGE_INGREDIENTS_POPUP_STATE: {\r\n      return {\r\n        ...state,\r\n        isIngredientsPopupOpen: action.payload\r\n      };\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};","import { combineReducers } from 'redux';\r\nimport { ingredientsReducer } from './ingredients';\r\nimport { orderReducer } from './order';\r\nimport { popupReducer } from './popup';\r\n\r\nexport const rootReducer = combineReducers({\r\n  ingredientsData: ingredientsReducer,\r\n  orderData: orderReducer,\r\n  popupState: popupReducer,\r\n});","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './components/app/app.jsx';\r\nimport { HashRouter } from \"react-router-dom\";\r\nimport { compose, createStore, applyMiddleware } from 'redux';\r\nimport thunk from 'redux-thunk';\r\nimport { Provider } from 'react-redux';\r\nimport { rootReducer } from './services/reducers/index';\r\n\r\nconst composeEnhancers =\r\n  typeof window === 'object' && window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__\r\n    ? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({})\r\n    : compose;\r\n\r\nconst enhancer = composeEnhancers(applyMiddleware(thunk));\r\n\r\nconst store = createStore(rootReducer, enhancer);\r\n\r\nReactDOM.render((\r\n  <React.StrictMode>\r\n    <HashRouter>\r\n      <Provider store={store}>\r\n        <App />\r\n      </Provider>\r\n    </HashRouter>\r\n  </React.StrictMode>\r\n), document.getElementById('root'));\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main_container\":\"burger-ingredients_main_container__1ypSr\",\"list\":\"burger-ingredients_list__28pax\",\"ingredients_container\":\"burger-ingredients_ingredients_container__V2yiM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"ingredient-details_container__1ZFLd\",\"list\":\"ingredient-details_list__2nkKo\",\"listItem\":\"ingredient-details_listItem__go-FH\",\"title\":\"ingredient-details_title__nbDdr\",\"header\":\"ingredient-details_header__2COJg\",\"closeButton\":\"ingredient-details_closeButton__2YrT1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"list\":\"burger-constructor_list__I6ezH\",\"constructor_container\":\"burger-constructor_constructor_container__3nAJ9\",\"list_item\":\"burger-constructor_list_item__Zndc0\",\"button_container\":\"burger-constructor_button_container__1r4sm\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"modal_container__3Uihb\",\"title\":\"modal_title__MEoQp\",\"header\":\"modal_header__3fbro\",\"closeButton\":\"modal_closeButton__3qeWl\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"order-details_title__2JbNf\",\"text\":\"order-details_text__3PxFh\",\"container\":\"order-details_container__3KS0F\",\"header\":\"order-details_header__G-UoV\",\"closeButton\":\"order-details_closeButton__LegxB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"main_main__dD72x\",\"main_container\":\"main_main_container__2Egw-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"app_app__WJwAR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"modal-overlay_overlay__1J6KR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loader\":\"loader_loader__qnhLB\",\"rotate\":\"loader_rotate__jeH32\"};"],"sourceRoot":""}