(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{107:function(e,t,n){e.exports={app:"app_app__WJwAR"}},111:function(e,t,n){e.exports={container:"modal-switch_container__3XBHj"}},113:function(e,t,n){e.exports={list:"order-history_list__1bjBo"}},115:function(e,t,n){e.exports={list_item:"chosen-ingredient_list_item__1qzNO"}},117:function(e,t,n){e.exports={main_container:"main_main_container__2Egw-"}},118:function(e,t,n){e.exports={overlay:"modal-overlay_overlay__1J6KR"}},119:function(e,t,n){e.exports={container:"feed_container__2cQDJ"}},18:function(e,t,n){e.exports={container:"order-full-info_container__1RiZT",order_info:"order-full-info_order_info__1KabW",order_number:"order-full-info_order_number__QeEpj",currency_container:"order-full-info_currency_container__1rmSv",footer:"order-full-info_footer__2bMMZ",list:"order-full-info_list__2H310",list_item:"order-full-info_list_item__1XfIC",image:"order-full-info_image__16dUi",item_currency:"order-full-info_item_currency__ArFN3",item_currency_container:"order-full-info_item_currency_container__20j03",title:"order-full-info_title__1jj1t"}},20:function(e,t,n){e.exports={header:"header_header__1FFP6",headerContainer:"header_headerContainer__1iNBN",profile:"header_profile__3Qq6I",logo:"header_logo__3TPe9",link:"header_link__19sUl",link_active:"header_link_active__39_Z-",list:"header_list__6rM50"}},21:function(e,t,n){e.exports={wrapper:"profile_wrapper__35R2i",navigation:"profile_navigation__1qyRL",list:"profile_list__3n0JC",link:"profile_link__2nzHA",link_active:"profile_link_active__2qkzD",text:"profile_text__2NQlR"}},210:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(36),i=n.n(c),s=n(107),o=n.n(s),l=n(5),u=n(4),d=n(20),j=n.n(d),_=n(0),p=function(){return Object(_.jsx)("header",{className:"".concat(j.a.header," text text_type_main-default pt-4 pb-4"),children:Object(_.jsxs)("div",{className:j.a.headerContainer,children:[Object(_.jsx)("nav",{children:Object(_.jsxs)("ul",{className:j.a.list,children:[Object(_.jsx)("li",{children:Object(_.jsxs)(l.c,{activeClassName:j.a.link_active,className:"pt-5 pr-5 pb-5 ".concat(j.a.link),exact:!0,to:"/",children:[Object(_.jsx)(u.BurgerIcon,{type:"secondary"}),Object(_.jsx)("span",{className:"ml-2",children:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440"})]})}),Object(_.jsx)("li",{children:Object(_.jsxs)(l.c,{activeClassName:j.a.link_active,className:"p-5 ".concat(j.a.link),exact:!0,to:"/feed",children:[Object(_.jsx)(u.ListIcon,{type:"secondary"}),Object(_.jsx)("span",{className:"ml-2",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})]})})]})}),Object(_.jsx)("div",{className:j.a.logo,children:Object(_.jsx)(l.c,{exact:!0,to:"/",children:Object(_.jsx)(u.Logo,{})})}),Object(_.jsxs)(l.c,{activeClassName:j.a.link_active,className:"p-5 ".concat(j.a.link," ").concat(j.a.profile),to:"/profile",children:[Object(_.jsx)(u.ProfileIcon,{type:"secondary"}),Object(_.jsx)("span",{className:"ml-2",children:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"})]})]})})},b=n(82),O=n.n(b),m=function(){return Object(_.jsx)("div",{className:O.a.loader_container,children:Object(_.jsx)("div",{className:O.a.loader})})},f=n(109),h=n(110),x=function(){function e(t){Object(f.a)(this,e),this._baseUrl=void 0,this._baseUrl=t}return Object(h.a)(e,[{key:"_requestResult",value:function(e){return e.ok?e.json():Promise.reject(e)}},{key:"getIngredients",value:function(){var e=this;return fetch("".concat(this._baseUrl,"/ingredients")).then((function(t){return e._requestResult(t)}))}},{key:"sendIngredients",value:function(e,t){var n=this;return fetch("".concat(this._baseUrl,"/orders"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8",Authorization:t},body:JSON.stringify({ingredients:e})}).then((function(e){return n._requestResult(e)}))}},{key:"getOrderInfo",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/orders/").concat(e)).then((function(e){return t._requestResult(e)}))}},{key:"sendEmail",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/password-reset"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})}).then((function(e){return t._requestResult(e)}))}},{key:"resetPassword",value:function(e,t){var n=this;return fetch("".concat(this._baseUrl,"/password-reset/reset"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:e,token:t})}).then((function(e){return n._requestResult(e)}))}},{key:"login",value:function(e,t){var n=this;return fetch("".concat(this._baseUrl,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}).then((function(e){return n._requestResult(e)}))}},{key:"register",value:function(e,t,n){var r=this;return fetch("".concat(this._baseUrl,"/auth/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:n,name:t})}).then((function(e){return r._requestResult(e)}))}},{key:"getUserData",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/auth/user"),{method:"GET",headers:{"Content-Type":"application/json;charset=utf-8",authorization:e}}).then((function(e){return t._requestResult(e)}))}},{key:"sendUserData",value:function(e,t,n,r){var a=this;return fetch("".concat(this._baseUrl,"/auth/user"),{method:"PATCH",headers:{"Content-Type":"application/json;charset=utf-8",authorization:e},body:JSON.stringify({email:n,name:t,password:r})}).then((function(e){return a._requestResult(e)}))}},{key:"refreshToken",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/auth/token"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e})}).then((function(e){return t._requestResult(e)}))}},{key:"logout",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/auth/logout"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e})}).then((function(e){return t._requestResult(e)}))}}]),e}(),g=new x("https://norma.nomoreparties.space/api"),y=g,v=n(219),N="GET_INGREDIENTS",E="GET_INGREDIENTS_FAILED",R="GET_INGREDIENTS_SUCCESS",S="SELECT_INGREDIENT",D="DELETE_SELECTED_INGREDIENT",T="ADD_INGREDIENT",I="DELETE_INGREDIENT",C="DELETE_ALL_INGREDIENTS",k="SORT_INGREDIENTS",w=function(e){var t=e.map((function(e){var t=Object.assign({},e);return t.uuid=Object(v.a)(),t}));return{type:T,payload:t}},q=n(111),F=n.n(q),U=n(10),A=n(7),P=n(37),L=n.n(P),G="REGISTRATION",B="REGISTRATION_SUCCESS",z="REGISTRATION_FAILED",W="LOGIN",H="LOGIN_SUCCESS",M="LOGIN_FAILED",J="FORGOT_PASSWORD",K="FORGOT_PASSWORD_SUCCESS",X="FORGOT_PASSWORD_FAILED",Z="RESET_PASSWORD",Q="RESET_PASSWORD_SUCCESS",V="RESET_PASSWORD_FAILED",Y="GET_USER_DATA",$="GET_USER_DATA_SUCCESS",ee="GET_USER_DATA_FAILED",te="SEND_USER_DATA",ne="SEND_USER_DATA_SUCCESS",re="SEND_USER_DATA_FAILED",ae="LOGOUT",ce="LOGOUT_SUCCESS",ie="LOGOUT_FAILED",se="REFRESH_TOKEN",oe="REFRESH_TOKEN_SUCCESS",le="REFRESH_TOKEN_FAILED",ue="SET_FORGOT_PASSWORD_STATE",de=function(){return{type:M}},je=function(e){return{type:ue,payload:e}},_e=function(e,t,n){return function(r){r({type:G}),y.register(e,t,n).then((function(e){var t;r((t=e.accessToken,{type:B,payload:t})),localStorage.setItem("refreshToken",e.refreshToken)})).catch((function(e){r({type:z}),console.log(e)}))}},pe=function(e,t){return function(n){n({type:W}),y.login(e,t).then((function(e){n({type:H,payload:e}),localStorage.setItem("refreshToken",e.refreshToken)})).catch((function(e){n(de()),console.log(e)}))}},be=function(e){return function(t){t({type:Y}),y.getUserData(e).then((function(e){var n;t((n=e.user,{type:$,payload:n}))})).catch((function(e){t({type:ee}),403!==e.status&&401!==e.status||t(me(localStorage.getItem("refreshToken"),"getUserData")),console.log(e)}))}},Oe=function(e,t,n,r){return function(a){a({type:te}),y.sendUserData(e,t,n,r).then((function(e){var t;a((t=e.user,{type:ne,payload:t}))})).catch((function(e){console.log(e),403===e.status&&a(me(localStorage.getItem("refreshToken"),"getUserData")),a({type:re})}))}},me=function(e){return function(t){t({type:se}),y.refreshToken(e).then((function(e){var n;localStorage.setItem("refreshToken",e.refreshToken),t((n=e.accessToken,{type:oe,payload:n}))})).catch((function(e){t({type:le}),console.log(e)}))}},fe=function(e){return function(t){t({type:J}),y.sendEmail(e).then((function(){})).catch((function(e){console.log(e)}))}},he=function(e,t){return function(n){n({type:Z}),y.resetPassword(e,t).then((function(){})).catch((function(e){console.log(e)}))}},xe=function(e){return function(t){t({type:ae}),y.logout(e).then((function(){localStorage.removeItem("refreshToken"),t({type:ce})})).catch((function(e){t(de()),console.log(e)}))}},ge=n(43),ye=ge.c,ve=function(){return Object(ge.b)()},Ne=function(){var e=Object(r.useState)(""),t=Object(A.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),i=Object(A.a)(c,2),s=i[0],o=i[1],d=Object(r.useRef)(null),j=ve(),p=Object(U.g)(),b=Object(U.h)(),O=ye((function(e){return e.userData.userData}));return Object(r.useEffect)((function(){O&&(b.state&&b.state.previousLocation?p.push(b.state.previousLocation.pathname):p.push("/"))}),[O,p,b]),Object(_.jsxs)("article",{className:L.a.wrapper,children:[Object(_.jsxs)("form",{onSubmit:function(e){e.preventDefault(),n&&s&&j(pe(n,s))},className:L.a.form,children:[Object(_.jsx)("h1",{className:"".concat(L.a.title," text text_type_main-medium"),children:"\u0412\u0445\u043e\u0434"}),Object(_.jsx)("div",{className:"mt-6 mb-6",children:Object(_.jsx)(u.Input,{type:"text",placeholder:"E-mail",onChange:function(e){return a(e.target.value)},value:n,name:"e-mail",error:!1,ref:d,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default"})}),Object(_.jsx)("div",{className:"mb-6",children:Object(_.jsx)(u.PasswordInput,{onChange:function(e){o(e.target.value)},value:s,name:"password"})}),Object(_.jsx)(u.Button,{type:"primary",size:"medium",children:"\u0412\u043e\u0439\u0442\u0438"})]}),Object(_.jsxs)("p",{className:"text text_type_main-default text_color_inactive",children:["\u0412\u044b \u2014 \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c? ",Object(_.jsx)(l.b,{className:L.a.link,to:"/register",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(_.jsxs)("p",{className:"text text_type_main-default text_color_inactive mt-4",children:["\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c? ",Object(_.jsx)(l.b,{className:L.a.link,to:"/forgot-password",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})]})]})},Ee=n(44),Re=n.n(Ee),Se=function(){var e=Object(r.useState)(""),t=Object(A.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),i=Object(A.a)(c,2),s=i[0],o=i[1],d=Object(r.useState)(""),j=Object(A.a)(d,2),p=j[0],b=j[1],O=Object(r.useRef)(null),m=ve(),f=ye((function(e){return e.userData.userData})),h=Object(U.g)();return Object(r.useEffect)((function(){f&&h.push("/")}),[f,h]),Object(_.jsxs)("article",{className:Re.a.wrapper,children:[Object(_.jsxs)("form",{onSubmit:function(e){e.preventDefault(),n&&s&&p&&m(_e(s,n,p))},className:Re.a.form,children:[Object(_.jsx)("h1",{className:"".concat(Re.a.title," text text_type_main-medium"),children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(_.jsx)("div",{className:"mt-6 mb-6",children:Object(_.jsx)(u.Input,{type:"text",placeholder:"\u0418\u043c\u044f",onChange:function(e){return a(e.target.value)},value:n,name:"name",error:!1,ref:O,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default"})}),Object(_.jsx)("div",{className:"mb-6",children:Object(_.jsx)(u.Input,{type:"text",placeholder:"E-mail",onChange:function(e){return o(e.target.value)},value:s,name:"e-mail",error:!1,ref:O,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default"})}),Object(_.jsx)("div",{className:"mb-6",children:Object(_.jsx)(u.PasswordInput,{onChange:function(e){b(e.target.value)},value:p,name:"password"})}),Object(_.jsx)(u.Button,{type:"primary",size:"medium",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(_.jsxs)("p",{className:"text text_type_main-default text_color_inactive",children:["\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b? ",Object(_.jsx)(l.b,{className:Re.a.link,to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})},De=n(45),Te=n.n(De),Ie=function(){var e=Object(r.useState)(""),t=Object(A.a)(e,2),n=t[0],a=t[1],c=Object(r.useRef)(null),i=ve(),s=Object(U.g)();return Object(_.jsxs)("article",{className:Te.a.wrapper,children:[Object(_.jsxs)("form",{onSubmit:function(e){e.preventDefault(),n&&(i(fe(n)),i(je(!0)),a(""),s.push("/reset-password"))},className:Te.a.form,children:[Object(_.jsx)("h1",{className:"".concat(Te.a.title," text text_type_main-medium mb-6"),children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(_.jsx)("div",{className:"mb-6",children:Object(_.jsx)(u.Input,{type:"text",placeholder:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 e-mail",onChange:function(e){return a(e.target.value)},value:n,name:"e-mail",error:!1,ref:c,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default"})}),Object(_.jsx)(u.Button,{type:"primary",size:"medium",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"})]}),Object(_.jsxs)("p",{className:"text text_type_main-default text_color_inactive",children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c? ",Object(_.jsx)(l.b,{className:Te.a.link,to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})},Ce=n(46),ke=n.n(Ce),we=function(){var e=Object(r.useState)(""),t=Object(A.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),i=Object(A.a)(c,2),s=i[0],o=i[1],d=Object(r.useRef)(null),j=ve(),p=Object(U.g)(),b=ye((function(e){return e.userData.isPasswordForgot})),O=Object(U.h)(),m=ye((function(e){return e.userData.userData}));return Object(r.useEffect)((function(){m?O.state&&O.state.previousLocation?p.push(O.state.previousLocation.pathname):p.push("/"):!b&&p.push("/forgot-password")}),[m,p,O,b]),Object(_.jsxs)("article",{className:ke.a.wrapper,children:[Object(_.jsxs)("form",{onSubmit:function(e){e.preventDefault(),s&&n&&(j(he(s,n)),j(je(!1)),a(""),o(""),p.push("/"))},className:ke.a.form,children:[Object(_.jsx)("h1",{className:"".concat(ke.a.title," text text_type_main-medium mb-6"),children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(_.jsx)(u.PasswordInput,{onChange:function(e){o(e.target.value)},value:s,name:"password",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c"}),Object(_.jsx)("div",{className:"mb-6 mt-6",children:Object(_.jsx)(u.Input,{type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430",onChange:function(e){return a(e.target.value)},value:n,name:"e-mail",error:!1,ref:d,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default"})}),Object(_.jsx)(u.Button,{type:"primary",size:"medium",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]}),Object(_.jsxs)("p",{className:"text text_type_main-default text_color_inactive",children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c? ",Object(_.jsx)(l.b,{className:ke.a.link,to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})},qe=n(21),Fe=n.n(qe),Ue=n(83),Ae=n.n(Ue),Pe=function(){var e=ye((function(e){return e.userData.userData})),t=ye((function(e){return e.userData.accessToken})),n=ve(),a=Object(r.useState)("?"),c=Object(A.a)(a,2),i=c[0],s=c[1],o=Object(r.useState)("?"),l=Object(A.a)(o,2),d=l[0],j=l[1],p=Object(r.useState)(""),b=Object(A.a)(p,2),O=b[0],m=b[1],f=Object(r.useState)(!1),h=Object(A.a)(f,2),x=h[0],g=h[1],y=Object(r.useRef)(null),v=Object(r.useRef)(null),N=Object(r.useRef)(null);return Object(r.useEffect)((function(){e&&(j(e.email),s(e.name),m(""))}),[e]),Object(_.jsxs)("form",{onSubmit:function(e){e.preventDefault(),n(Oe(t,i,d,O))},className:Ae.a.form,children:[Object(_.jsx)(u.Input,{type:"text",placeholder:"\u0418\u043c\u044f",onChange:function(t){var n=t.target.value;s(n),n===e.name?g(!1):g(!0)},icon:"EditIcon",value:i,name:"name",error:!1,ref:y,onIconClick:function(){return null!==y.current&&y.current.focus()},errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default"}),Object(_.jsx)(u.Input,{type:"text",placeholder:"\u041b\u043e\u0433\u0438\u043d",onChange:function(t){var n=t.target.value;j(n),n===e.email?g(!1):g(!0)},icon:"EditIcon",value:d,name:"name",error:!1,ref:v,onIconClick:function(){return null!==v.current&&v.current.focus()},errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default"}),Object(_.jsx)(u.Input,{type:"text",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",onChange:function(e){var t=e.target.value;m(t),g(t!==O)},icon:"EditIcon",value:O,name:"name",error:!1,ref:N,onIconClick:function(){return null!==N.current&&N.current.focus()},errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default"}),x&&Object(_.jsxs)("div",{className:Ae.a.buttons_container,children:[Object(_.jsx)(u.Button,{onClick:function(){s(e.name),j(e.email),m("")},type:"secondary",size:"medium",children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),Object(_.jsx)(u.Button,{type:"primary",size:"medium",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})]})},Le=n(113),Ge=n.n(Le),Be=n(28),ze=n.n(Be),We=function(e){var t,n=e.order,r=e.isHistory,a=void 0!==r&&r,c=Object(U.h)(),i=n.status,s=n.number,o=n.createdAt,d=n.name,j=n.ingredients,p=ye((function(e){return e.ingredientsData.ingredients}));return Object(_.jsx)("li",{children:Object(_.jsxs)(l.b,{className:ze.a.link,to:{pathname:"".concat(c.pathname,"/").concat(s),state:{background:c}},children:[Object(_.jsxs)("div",{className:ze.a.header,children:[Object(_.jsx)("p",{className:"text text_type_digits-default",children:"#".concat(s)}),Object(_.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:(t=o,new Date(t).toLocaleString())})]}),Object(_.jsx)("h2",{className:"text text_type_main-medium",children:d}),i&&a&&Object(_.jsx)("p",{className:"text text_type_main-default",children:function(e){if("done"===e)return"\u0421\u043e\u0437\u0434\u0430\u043d"}(i)}),Object(_.jsxs)("div",{className:ze.a.footer,children:[Object(_.jsx)("ul",{className:ze.a.ingredients_list,children:j.map((function(e,t){var n=function(e,t){return t.find((function(t){return t._id===e}))}(e,p);return t<5?Object(_.jsx)("li",{style:{zIndex:999-t},className:ze.a.ingredients_list_item,children:Object(_.jsx)("img",{className:ze.a.ingredients_list_item_image,src:null===n||void 0===n?void 0:n.image,alt:null===n||void 0===n?void 0:n.name})},t):null}))}),Object(_.jsxs)("div",{className:ze.a.total,children:[Object(_.jsx)("span",{className:"text text_type_digits-default",children:function(){var e=0;return j.forEach((function(t){var n=p.find((function(e){return e._id===t}));(null===n||void 0===n?void 0:n.price)&&(e+=n.price)})),e}()}),Object(_.jsx)(u.CurrencyIcon,{type:"primary"})]})]})]})})},He="WS_CONNECTION_START",Me="WS_CONNECTION_SUCCESS",Je="WS_CONNECTION_ERROR",Ke="WS_CONNECTION_CLOSED",Xe="WS_GET_ORDERS",Ze="WS_USER_ORDERS_CONNECTION_START",Qe="WS_USER_ORDERS_CONNECTION_SUCCESS",Ve="WS_USER_ORDERS_CONNECTION_ERROR",Ye="WS_USER_ORDERS_CONNECTION_CLOSED",$e="WS_GET_USER_ORDERS",et="GET_ORDER_INFO",tt="GET_ORDER_INFO_SUCCESS",nt="GET_ORDER_INFO_FAILED",rt="CLEAN_ORDER_INFO",at=function(e){return function(t){t({type:et}),y.getOrderInfo(e).then((function(e){e&&t(function(e){return{type:tt,payload:e}}(e.orders[0]))})).catch((function(){return t({type:nt})}))}},ct=function(){var e=ye((function(e){return e.ordersData.userOrders})),t=ve();return Object(r.useEffect)((function(){return t({type:Ze}),function(){t({type:Ye})}}),[t]),Object(_.jsx)("ul",{className:Ge.a.list,children:Object(_.jsx)(_.Fragment,{children:e.length>0?Object(_.jsx)(_.Fragment,{children:e.map((function(e,t){return Object(_.jsx)(We,{isHistory:!0,order:e},t)}))}):Object(_.jsx)(m,{})})})},it=function(){var e=ve(),t=Object(U.j)(),n=t.path,r=t.url;return Object(_.jsxs)("article",{className:Fe.a.wrapper,children:[Object(_.jsxs)("nav",{className:Fe.a.navigation,children:[Object(_.jsxs)("ul",{className:"".concat(Fe.a.list),children:[Object(_.jsx)("li",{className:Fe.a.list_item,children:Object(_.jsx)(l.c,{activeClassName:Fe.a.link_active,className:"".concat(Fe.a.link," text text_type_main-medium"),to:"".concat(r),exact:!0,children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"})}),Object(_.jsx)("li",{children:Object(_.jsx)(l.c,{activeClassName:Fe.a.link_active,className:"".concat(Fe.a.link," text text_type_main-medium"),to:"".concat(r,"/orders"),children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})}),Object(_.jsx)("li",{children:Object(_.jsx)(l.c,{activeClassName:Fe.a.link_active,className:"".concat(Fe.a.link," text text_type_main-medium"),to:"/login",onClick:function(){var t=localStorage.getItem("refreshToken");e(xe(t))},children:"\u0412\u044b\u0445\u043e\u0434"})})]}),Object(_.jsx)("p",{className:"".concat(Fe.a.text," text text_type_main-default text_color_inactive"),children:"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0432\u043e\u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"})]}),Object(_.jsx)(U.b,{exact:!0,path:"".concat(n),children:Object(_.jsx)(Pe,{})}),Object(_.jsx)(U.b,{path:"".concat(n,"/orders"),children:Object(_.jsx)(ct,{})})]})},st=n(84),ot=n.n(st),lt=function(){return Object(_.jsxs)("article",{className:ot.a.wrapper,children:[Object(_.jsx)("p",{className:"text text_type_digits-large text_color_inactive",children:"404"}),Object(_.jsx)("h1",{className:"text text_type_main-large",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"}),Object(_.jsx)("h2",{className:"text text_type_main-medium",children:"\u041d\u0443 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430 \u0438 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430. \u0423 \u043d\u0430\u0441 \u0435\u0441\u0442\u044c \u043e\u0447\u0435\u043d\u044c \u043a\u0440\u0443\u0442\u044b\u0435 \u0431\u0443\u0440\u0433\u0435\u0440\u044b!"}),Object(_.jsx)(l.b,{className:ot.a.link,to:"/",children:Object(_.jsx)(u.Button,{type:"primary",size:"medium",children:"\u041a \u0431\u0443\u0440\u0433\u0435\u0440\u0430\u043c"})})]})},ut=n(2),dt=n(58),jt=["children"],_t=function(e){var t=e.children,n=Object(dt.a)(e,jt),r=ye((function(e){return e.userData.userData})),a=Object(U.h)();return Object(_.jsx)(U.b,Object(ut.a)(Object(ut.a)({},n),{},{render:function(){return r?t:Object(_.jsx)(U.a,{to:{pathname:"/login",state:{previousLocation:a}}})}}))},pt="CHANGE_ORDER_DETAILS_POPUP_STATE",bt="CHANGE_INGREDIENTS_POPUP_STATE",Ot="CHANGE_ORDER_POPUP_STATE",mt=function(e){return{type:pt,payload:e}},ft=function(e){return{type:bt,payload:e}},ht="GET_ORDER_DATA",xt="GET_ORDER_DATA_FAILED",gt="GET_ORDER_DATA_SUCCESS",yt="DELETE_ORDER_DATA",vt=function(e,t){return function(n){n({type:ht}),y.sendIngredients(e,t).then((function(e){e&&n(function(e){return{type:gt,payload:e}}(e))})).then((function(){n({type:C})})).catch((function(){return n({type:xt})}))}},Nt=n(25),Et=n(33),Rt=n.n(Et),St=function(e){var t=null===e||void 0===e?void 0:e.getBoundingClientRect();if(t)return{top:Math.round(t.top+scrollY),left:Math.round(t.left+scrollX)}},Dt=n(24),Tt=n.n(Dt),It=n(217),Ct=function(e){var t=e.ingredient,n=t.image,r=t.price,a=t.name,c=t._id,i=Object(U.h)(),s=ve(),o=ye((function(e){return e.ingredientsData.chosenIngredients})),d=ye((function(e){return e.ingredientsData.ingredients})),j=Object(It.a)({type:"ingredient",item:{_id:c},collect:function(e){return{isDrag:e.isDragging()}}}),p=Object(A.a)(j,2),b=p[0].isDrag,O=p[1],m=0;o.forEach((function(e){return e.name===a&&("bun"===e.type?m+=2:m+=1)}));return Object(_.jsx)("li",{"data-id":c,onContextMenu:function(e){e.preventDefault();var t=d.find((function(t){return t._id===e.currentTarget.dataset.id})),n=o.find((function(e){return"bun"===e.type})),r=o.indexOf(n);if("bun"===(null===t||void 0===t?void 0:t.type)&&n){var a=o.slice();a.splice(r,1,t),s(w(a))}else s(w([].concat(Object(Nt.a)(o),[t])))},onClick:function(e){var t=e.currentTarget.dataset.id,n=d.find((function(e){return e._id===t}));s(function(e){return{type:S,payload:e}}(n)),s(ft(!0))},className:"".concat(Tt.a.list_item," ").concat(b&&Tt.a.moving),ref:O,children:Object(_.jsxs)(l.b,{className:Tt.a.link,to:{pathname:"/ingredients/".concat(c),state:{background:i}},children:[Object(_.jsx)("img",{alt:a,src:n,className:"".concat(Tt.a.image," ml-4 mr-4")}),Object(_.jsxs)("div",{className:"".concat(Tt.a.price_info," mt-4 mb-4"),children:[Object(_.jsx)("span",{className:"text text_type_digits-default mr-2",children:r}),Object(_.jsx)(u.CurrencyIcon,{type:"primary"})]}),Object(_.jsx)("h3",{className:"".concat(Tt.a.text," text text_type_main-default"),children:a}),m>0&&Object(_.jsx)(u.Counter,{count:m,size:"default"}),Object(_.jsxs)("div",{className:"".concat(Tt.a.hint_icons),children:[Object(_.jsx)("span",{className:"".concat(Tt.a.left_click_icon)}),Object(_.jsx)("span",{className:"".concat(Tt.a.right_click_icon)}),Object(_.jsx)("span",{className:"".concat(Tt.a.drag_icon)})]})]})})},kt=function(){var e=ye((function(e){return e.ingredientsData.ingredients})),t=Object(r.useState)("bun"),n=Object(A.a)(t,2),a=n[0],c=n[1],i=function(e){var t;c(e),null===(t=document.querySelector("#".concat(e)))||void 0===t||t.scrollIntoView({block:"start",behavior:"smooth"})};return Object(_.jsxs)("div",{className:Rt.a.main_container,children:[Object(_.jsx)("h1",{className:"mt-10 mb-5 text text_type_main-large",children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"}),Object(_.jsxs)("div",{style:{display:"flex"},children:[Object(_.jsx)(u.Tab,{value:"bun",active:"bun"===a,onClick:i,children:"\u0411\u0443\u043b\u043a\u0438"}),Object(_.jsx)(u.Tab,{value:"sauce",active:"sauce"===a,onClick:i,children:"\u0421\u043e\u0443\u0441\u044b"}),Object(_.jsx)(u.Tab,{value:"main",active:"main"===a,onClick:i,children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"})]}),Object(_.jsxs)("div",{onScroll:function(e){e.target.addEventListener("scroll",(function(){c(function(e){var t=St(document.querySelector("#bun")).top,n=St(document.querySelector("#sauce")).top,r=St(document.querySelector("#main")).top,a=St(document.querySelector(".".concat(e))).top,c=[{title:"bun",value:Math.abs(a-t)},{title:"sauce",value:Math.abs(a-n)},{title:"main",value:Math.abs(a-r)}],i=c.map((function(e){return e.value})),s=Math.min.apply(Math,Object(Nt.a)(i));return c.find((function(e){return e.value===s})).title}(Rt.a.main_container))}))},className:"".concat(Rt.a.ingredients_container," mt-10 ingredients-container"),children:[Object(_.jsx)("h2",{id:"bun",className:"mb-6 text text_type_main-medium",children:"\u0411\u0443\u043b\u043a\u0438"}),Object(_.jsx)("ul",{className:"".concat(Rt.a.list," pt-6 pb-10 pr-4 pl-4"),children:e.map((function(e){return"bun"===e.type&&Object(_.jsx)(Ct,{ingredient:e},e._id)}))}),Object(_.jsx)("h2",{id:"sauce",className:"mb-6 text text_type_main-medium",children:"\u0421\u043e\u0443\u0441\u044b"}),Object(_.jsx)("ul",{className:"".concat(Rt.a.list," pt-6 pb-10 pr-4 pl-4"),children:e.map((function(e){return"sauce"===e.type&&Object(_.jsx)(Ct,{ingredient:e},e._id)}))}),Object(_.jsx)("h2",{id:"main",className:"mb-6 text text_type_main-medium",children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"}),Object(_.jsx)("ul",{className:"".concat(Rt.a.list," pt-6 pb-10 pr-4 pl-4"),children:e.map((function(e){return"main"===e.type&&Object(_.jsx)(Ct,{ingredient:e},e._id)}))})]})]})},wt=n(47),qt=n.n(wt),Ft=n(218),Ut=n(216),At=n(56),Pt=n(115),Lt=n.n(Pt),Gt=function(e){var t=e.ingredient,n=e.id,a=e.moveIngredient,c=e.index,i=t.name,s=t.price,o=t.image,l=ve(),d=ye((function(e){return e.ingredientsData.chosenIngredients})),j=Object(r.useRef)(null),p=Object(Ft.a)({accept:"chosen-ingredient",collect:function(e){return{handlerId:e.getHandlerId()}},drop:function(e,t){var n;if(j.current){var r=e.index,i=c;if(r!==i){var s=null===(n=j.current)||void 0===n?void 0:n.getBoundingClientRect(),o=(s.bottom-s.top)/2,l=t.getClientOffset().y-s.top;r<i&&l<o||r>i&&l>o||(a(r-1,i-1),e.index=i)}}}}),b=Object(A.a)(p,2),O=b[0].handlerId,m=b[1],f=Object(It.a)({type:"chosen-ingredient",item:function(){return{id:n,index:c}},collect:function(e){return{isDragging:e.isDragging()}}}),h=Object(A.a)(f,2),x=h[0].isDragging?0:1;(0,h[1])(m(j));var g;return Object(_.jsxs)("li",{ref:j,style:{opacity:x},"data-handler-id":O,className:Lt.a.list_item,children:[Object(_.jsx)(u.DragIcon,{type:"primary"}),Object(_.jsx)(u.ConstructorElement,{text:i,price:s,thumbnail:o,handleClose:(g=t,function(){var e=d.indexOf(g),t=d.slice();t.splice(e,1),l({type:I,payload:t})})})]})},Bt=n(116),zt=n.n(Bt),Wt=function(e){var t=e.onDropHandler,n=ve(),a=Object(U.g)(),c=ye((function(e){return e.ingredientsData.chosenIngredients})),i=ye((function(e){return e.userData.userData})),s=ye((function(e){return e.userData.accessToken})),o=Object(r.useMemo)((function(){return c.reduce((function(e,t){return"bun"===t.type?e+2*t.price:e+t.price}),0)}),[c]),l=Object(Ft.a)({accept:"ingredient",drop:function(e){t(e)},collect:function(e){return{isHover:e.isOver()}}}),d=Object(A.a)(l,2),j=d[0].isHover,p=d[1],b=Object(r.useCallback)((function(e,t){var r,a=c.filter((function(e){return"bun"===e.type})),i=c.filter((function(e){return"bun"!==e.type})),s=zt()(i,{$splice:[[e,1],[t,0,i[e]]]}),o=[].concat(Object(Nt.a)(a),Object(Nt.a)(s));n((r=Object(Nt.a)(o),{type:k,payload:r}))}),[c,n]),O=j?"#5147F8":"transparent",m=function(e,t,n,r){return e.find((function(e){return"bun"===e.type}))?"".concat(e.find((function(e){return"bun"===e.type}))[t]," ").concat(n):r};return Object(_.jsx)(Ut.a,{backend:At.a,children:Object(_.jsxs)("div",{ref:p,style:{borderColor:O},className:"".concat(qt.a.constructor_container," mt-25 pt-5 pb-5"),children:[Object(_.jsx)("div",{className:"".concat(qt.a.constructor_element," pr-5"),children:c.length>0?Object(_.jsx)(u.ConstructorElement,{type:"top",isLocked:!0,text:m(c,"name","(\u0432\u0435\u0440\u0445)","\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u043b\u043a\u0443"),price:+m(c,"price","","0"),thumbnail:m(c,"image","","")}):Object(_.jsx)("p",{className:"text text_type_main-large pt-3",children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u043b\u043a\u0443"})}),Object(_.jsx)("ul",{className:"".concat(qt.a.list," pl-4 pr-4"),children:c.map((function(e,t){return"bun"!==e.type&&Object(_.jsx)(Gt,{index:t,moveIngredient:b,ingredient:e,id:"".concat(e._id).concat(t)},e.uuid)}))}),Object(_.jsx)("div",{className:"pr-5",children:c.length>0&&Object(_.jsx)(u.ConstructorElement,{type:"bottom",isLocked:!0,text:m(c,"name","(\u043d\u0438\u0437)","\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u043b\u043a\u0443"),price:+m(c,"price","","0"),thumbnail:m(c,"image","","")})}),Object(_.jsxs)("div",{className:"".concat(qt.a.button_container," pt-5 pr-5"),children:[Object(_.jsxs)("div",{className:"mr-10",children:[Object(_.jsx)("span",{className:"text text_type_digits-medium mr-2",children:o}),Object(_.jsx)(u.CurrencyIcon,{type:"primary"})]}),Object(_.jsx)(u.Button,{onClick:function(){var e=c.map((function(e){return e._id}));i?(n(vt(e,s)),n(mt(!0))):a.push("/login")},type:"primary",size:"medium",children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})]})]})})},Ht=n(117),Mt=n.n(Ht),Jt=function(){var e=ve(),t=ye((function(e){return e.ingredientsData.chosenIngredients})),n=ye((function(e){return e.ingredientsData.ingredients}));return Object(_.jsx)("main",{children:Object(_.jsx)(Ut.a,{backend:At.a,children:Object(_.jsxs)("section",{className:Mt.a.main_container,children:[Object(_.jsx)(kt,{}),Object(_.jsx)(Wt,{onDropHandler:function(r){var a=n.find((function(e){return e._id===r._id})),c=t.find((function(e){return"bun"===e.type})),i=t.indexOf(c);if("bun"===a.type&&c){var s=t.slice();s.splice(i,1,a),e(w(s))}else e(w([].concat(Object(Nt.a)(t),[a])))}})]})})})},Kt=n(48),Xt=n.n(Kt),Zt=n(118),Qt=n.n(Zt),Vt=function(e){var t=e.handlePopupClose;return Object(_.jsx)("div",{onClick:t,className:Qt.a.overlay})},Yt=function(e){var t=e.handlePopupClose,n=e.children,a=e.title,i=void 0===a?"":a,s=document.getElementById("react-modals");return Object(r.useEffect)((function(){var e=function(e){"Escape"===e.key&&t()};return document.addEventListener("keyup",e),function(){document.removeEventListener("keyup",e)}}),[t]),Object(c.createPortal)(Object(_.jsxs)(_.Fragment,{children:[Object(_.jsxs)("div",{className:"".concat(Xt.a.container," pt-15 pr-10 pl-10 pb-15"),children:[Object(_.jsxs)("header",{className:Xt.a.header,children:[i&&Object(_.jsx)("h2",{className:"".concat(Xt.a.title," text text_type_main-large"),children:i}),Object(_.jsx)("button",{onClick:t,className:Xt.a.closeButton,children:Object(_.jsx)(u.CloseIcon,{type:"primary"})})]}),n]}),Object(_.jsx)(Vt,{handlePopupClose:t})]}),s)},$t=n(59),en=n.n($t),tn=n.p+"static/media/done.cc5a59a7.gif",nn=function(){var e=ye((function(e){return e.orderData.orderDetails}));return Object(_.jsx)(_.Fragment,{children:e?Object(_.jsxs)("div",{className:"".concat(en.a.container),children:[Object(_.jsx)("h3",{className:"text text_type_digits-large pt-10 ".concat(en.a.title),children:e.order.number}),Object(_.jsx)("p",{className:"text text_type_main-medium pt-8 pb-15",children:"\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(_.jsx)("img",{className:"pb-15",src:tn,alt:"\u0447\u0435\u043a\u0430\u0443\u0442"}),Object(_.jsx)("p",{className:"text text_type_main-default pb-2 ".concat(en.a.text),children:e.success?"\u0412\u0430\u0448 '".concat(e.name,"' \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"):"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u0432 \u043e\u0447\u0435\u0440\u0435\u0434\u0438 \u043d\u0430 \u043f\u0440\u0438\u0433\u043e\u0442\u043e\u0432\u043b\u0435\u043d\u0438\u0435"}),e.success&&Object(_.jsx)("p",{className:"text text_type_main-default text_color_inactive pb-15",children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]}):null})},rn=n(29),an=n.n(rn),cn=function(e){var t=e.title,n=Object(U.i)().id,r=ye((function(e){return e.ingredientsData.ingredients})).find((function(e){return e._id===n}));return Object(_.jsx)(_.Fragment,{children:r&&Object(_.jsxs)("div",{className:"".concat(an.a.container),children:[t&&Object(_.jsx)("h2",{className:"".concat(an.a.title," text text_type_main-large"),children:t}),Object(_.jsx)("img",{width:"480",height:"240",alt:r.name,src:r&&r.image}),Object(_.jsx)("p",{className:"text text_type_main-medium pt-4 pb-8",children:r&&r.name}),Object(_.jsxs)("ul",{className:"".concat(an.a.list," pt-8"),children:[Object(_.jsxs)("li",{className:"".concat(an.a.listItem," text text_type_main-default text_color_inactive"),children:[Object(_.jsx)("span",{children:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438,\u043a\u043a\u0430\u043b"}),r.calories]}),Object(_.jsxs)("li",{className:"".concat(an.a.listItem," text text_type_main-default text_color_inactive"),children:[Object(_.jsx)("span",{children:"\u0411\u0435\u043b\u043a\u0438, \u0433"}),r.proteins]}),Object(_.jsxs)("li",{className:"".concat(an.a.listItem," text text_type_main-default text_color_inactive"),children:[Object(_.jsx)("span",{children:"\u0416\u0438\u0440\u044b, \u0433"}),r.fat]}),Object(_.jsxs)("li",{className:"".concat(an.a.listItem," text text_type_main-default text_color_inactive"),children:[Object(_.jsx)("span",{children:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433"}),r.carbohydrates]})]})]})})},sn=n(119),on=n.n(sn),ln=n(60),un=n.n(ln),dn=function(){var e=ye((function(e){return e.ordersData.orders}));return Object(_.jsxs)("div",{className:un.a.main_container,children:[Object(_.jsx)("h1",{className:"mt-10 mb-5 text text_type_main-large",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(_.jsx)("div",{className:"".concat(un.a.orders_container," mt-10 ingredients-container"),children:e.length>0?Object(_.jsx)("ul",{className:"".concat(un.a.list," pt-6 pb-10 pr-4 pl-4"),children:null===e||void 0===e?void 0:e.map((function(e,t){return Object(_.jsx)(We,{isHistory:!1,order:e},t)}))}):Object(_.jsx)(m,{})})]})},jn=n(22),_n=n.n(jn),pn=function(){var e=ye((function(e){return e.ordersData.total})),t=ye((function(e){return e.ordersData.totalToday})),n=ye((function(e){return e.ordersData.orders}));return Object(_.jsx)("div",{className:_n.a.container,children:Object(_.jsx)(_.Fragment,{children:n.length>0?Object(_.jsxs)(_.Fragment,{children:[Object(_.jsxs)("div",{className:_n.a.order_numbers,children:[(null===n||void 0===n?void 0:n.some((function(e){return"done"===e.status})))&&Object(_.jsxs)("div",{className:_n.a.ready,children:[Object(_.jsx)("p",{className:"text text_type_main-medium pb-6",children:"\u0413\u043e\u0442\u043e\u0432\u044b:"}),Object(_.jsxs)("div",{className:_n.a.numbers_container,children:[Object(_.jsx)("ul",{className:_n.a.list_accent,children:null===n||void 0===n?void 0:n.map((function(e,t){return t<10&&"done"===e.status?Object(_.jsx)("li",{className:"text text_type_digits-default pb-2",children:e.number},t):null}))}),Object(_.jsx)("ul",{className:_n.a.list_accent,children:null===n||void 0===n?void 0:n.map((function(e,t){return t>=10&&t<20&&"done"===e.status?Object(_.jsx)("li",{className:"text text_type_digits-default pb-2",children:e.number},t):null}))})]})]}),(null===n||void 0===n?void 0:n.some((function(e){return"pending"===e.status})))&&Object(_.jsxs)("div",{className:_n.a.atWork,children:[Object(_.jsx)("p",{className:"text text_type_main-medium pb-6",children:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435:"}),Object(_.jsx)("ul",{className:_n.a.list,children:null===n||void 0===n?void 0:n.map((function(e,t){return t<10&&"pending"===e.status?Object(_.jsx)("li",{className:"text text_type_digits-default pb-2",children:e.number},t):null}))})]})]}),Object(_.jsxs)("div",{className:_n.a.all_time,children:[Object(_.jsx)("p",{className:"text text_type_main-medium",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0432\u0441\u0435 \u0432\u0440\u0435\u043c\u044f:"}),Object(_.jsx)("span",{className:"".concat(_n.a.digits," text text_type_digits-large"),children:e})]}),Object(_.jsxs)("div",{children:[Object(_.jsx)("p",{className:"text text_type_main-medium",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f:"}),Object(_.jsx)("span",{className:"".concat(_n.a.digits," text text_type_digits-large"),children:t})]})]}):Object(_.jsx)(m,{})})})},bn=function(){var e=ve();return Object(r.useEffect)((function(){return e({type:He}),function(){e({type:Ke})}}),[e]),Object(_.jsxs)("article",{className:on.a.container,children:[Object(_.jsx)(dn,{}),Object(_.jsx)(pn,{})]})},On=n(18),mn=n.n(On),fn=function(e){var t,n,a,c=e.isPopup,i=ve(),s=Object(U.i)().orderNumber,o=ye((function(e){return e.ordersData.orderInfo})),l=ye((function(e){return e.ingredientsData.ingredients})),d=null===o||void 0===o?void 0:o.ingredients.map((function(e){return l.find((function(t){return t._id===e}))}));return Object(r.useEffect)((function(){s&&i(at(+s))}),[i,s]),Object(_.jsx)(_.Fragment,{children:(null===o||void 0===o?void 0:o.number)?Object(_.jsx)("div",{className:mn.a.container,style:c?{}:{marginTop:"120px"},children:Object(_.jsxs)("div",{className:mn.a.order_info,children:[Object(_.jsxs)("p",{className:"text text_type_digits-default pb-10 ".concat(mn.a.order_number),children:["#",o&&o.number]}),Object(_.jsx)("h2",{className:"text text_type_main-medium pb-3",children:o&&o.name}),Object(_.jsx)("p",{className:"text text_type_main-default pb-15 ".concat(mn.a.order_status),style:(a=null===o||void 0===o?void 0:o.status,"pending"===a?{color:"#00CCCC"}:{}),children:function(e){return"pending"===e?"\u0413\u043e\u0442\u043e\u0432\u0438\u0442\u0441\u044f":"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d"}(null===o||void 0===o?void 0:o.status)}),Object(_.jsx)("p",{className:"text text_type_main-medium pb-6",children:"\u0421\u043e\u0441\u0442\u0430\u0432:"}),Object(_.jsx)("ul",{className:mn.a.list,children:null===(t=Array.from(new Set(d)))||void 0===t?void 0:t.map((function(e,t){return Object(_.jsxs)("li",{className:mn.a.list_item,children:[Object(_.jsx)("img",{className:mn.a.image,src:null===e||void 0===e?void 0:e.image,alt:""}),Object(_.jsx)("h3",{className:"text text_type_main-default ".concat(mn.a.title),children:null===e||void 0===e?void 0:e.name}),Object(_.jsxs)("div",{className:"text text_type_digits-default ".concat(mn.a.item_currency),children:[Object(_.jsx)("span",{children:d&&(null===d||void 0===d?void 0:d.filter((function(t){return(null===t||void 0===t?void 0:t._id)===(null===e||void 0===e?void 0:e._id)})).length)}),"x",Object(_.jsxs)("div",{className:mn.a.item_currency_container,children:[Object(_.jsx)("span",{children:null===e||void 0===e?void 0:e.price}),Object(_.jsx)(u.CurrencyIcon,{type:"primary"})]})]})]},t)}))}),Object(_.jsxs)("div",{className:mn.a.footer,children:[Object(_.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:(n=null===o||void 0===o?void 0:o.createdAt,new Date(n).toLocaleString())}),Object(_.jsxs)("div",{className:mn.a.currency_container,children:[Object(_.jsx)("span",{className:"text text_type_digits-default",children:function(){var e=0;return null===d||void 0===d||d.forEach((function(t){var n=l.find((function(e){return(null===e||void 0===e?void 0:e._id)===(null===t||void 0===t?void 0:t._id)}));(null===n||void 0===n?void 0:n.price)&&(e+=n.price)})),e}()}),Object(_.jsx)(u.CurrencyIcon,{type:"primary"})]})]})]})}):Object(_.jsx)(m,{})})},hn=function(){var e=ve(),t=Object(U.g)(),n=ye((function(e){return e.orderData.orderDetails})),r=ye((function(e){return e.popupState.isOrderDetailsPopupOpen})),a=Object(U.h)(),c=a.state&&a.state.background,i=function(){e({type:Ot,payload:!1}),c&&t.goBack(),e({type:rt})};return Object(_.jsxs)("div",{className:"".concat(F.a.container," pb-10"),children:[Object(_.jsxs)(U.d,{location:c||a,children:[Object(_.jsx)(U.b,{exact:!0,path:"/",children:Object(_.jsx)(Jt,{})}),Object(_.jsx)(U.b,{path:"/login",children:Object(_.jsx)(Ne,{})}),Object(_.jsx)(U.b,{path:"/register",children:Object(_.jsx)(Se,{})}),Object(_.jsx)(U.b,{path:"/forgot-password",children:Object(_.jsx)(Ie,{})}),Object(_.jsx)(U.b,{path:"/reset-password",children:Object(_.jsx)(we,{})}),Object(_.jsx)(U.b,{path:"/ingredients/:id",children:Object(_.jsx)(cn,{title:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430"})}),Object(_.jsx)(U.b,{path:"/feed/:orderNumber",children:Object(_.jsx)(fn,{isPopup:!1})}),Object(_.jsx)(U.b,{path:"/profile/orders/:orderNumber",children:Object(_.jsx)(fn,{isPopup:!1})}),Object(_.jsx)(_t,{path:"/profile",children:Object(_.jsx)(it,{})}),Object(_.jsx)(U.b,{path:"/feed",children:Object(_.jsx)(bn,{})}),Object(_.jsx)(U.b,{path:"*",children:Object(_.jsx)(lt,{})})]}),r&&Object(_.jsx)(Yt,{handlePopupClose:function(){e(mt(!1)),e({type:yt})},children:n?Object(_.jsx)(nn,{}):Object(_.jsx)(m,{})}),c&&Object(_.jsx)(U.b,{path:"/ingredients/:id",children:Object(_.jsx)(Yt,{handlePopupClose:function(){e(ft(!1)),e({type:D}),c&&t.goBack()},title:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430",children:Object(_.jsx)(cn,{})})}),c&&Object(_.jsx)(U.b,{path:"/feed/:orderNumber",children:Object(_.jsx)(Yt,{handlePopupClose:i,children:Object(_.jsx)(fn,{isPopup:!0})})}),c&&Object(_.jsx)(U.b,{path:"/profile/orders/:orderNumber",children:Object(_.jsx)(Yt,{handlePopupClose:i,children:Object(_.jsx)(fn,{isPopup:!0})})})]})},xn=function(){var e=ye((function(e){return e.ingredientsData.ingredientsRequest})),t=ve(),n=ye((function(e){return e.userData.accessToken}));return Object(r.useEffect)((function(){t((function(e){e({type:N}),y.getIngredients().then((function(t){t&&e({type:R,payload:t.data})})).catch((function(){return e({type:E})}))})),t(be(n))}),[t,n]),Object(_.jsx)("div",{className:"".concat(o.a.app),children:e?Object(_.jsx)(m,{}):Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(p,{}),Object(_.jsx)(hn,{})]})})},gn=n(27),yn={ingredients:[],selectedIngredient:null,chosenIngredients:[],ingredientsRequest:!1,ingredientsFailed:!1},vn={orderDetails:null,orderRequest:!1,orderFailed:!1},Nn={isOrderDetailsPopupOpen:!1,isIngredientsPopupOpen:!1,isOrderPopupOpen:!1},En={registrationRequest:!1,registrationRequestFailed:!1,loginRequest:!1,loginRequestFailed:!1,forgotPasswordRequest:!1,forgotPasswordRequestFailed:!1,resetPasswordRequest:!1,resetPasswordRequestFailed:!1,getUserDataRequest:!1,getUserDataRequestFailed:!1,logoutRequest:!1,logoutRequestFailed:!1,refreshTokenRequest:!1,refreshTokenRequestFailed:!1,sendUserDataRequest:!1,sendUserDataRequestFailed:!1,isPasswordForgot:!1,accessToken:null,userData:null},Rn={wsAllOrders:!1,wsUserOrders:!1,orders:[],userOrders:[],total:0,totalToday:0,orderInfoRequest:!1,orderInfoFailed:!1,orderInfo:null},Sn=Object(gn.b)({ingredientsData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:return Object(ut.a)(Object(ut.a)({},e),{},{chosenIngredients:[]});case k:case T:case I:return Object(ut.a)(Object(ut.a)({},e),{},{chosenIngredients:t.payload});case E:return Object(ut.a)(Object(ut.a)({},e),{},{ingredientsRequest:!1,ingredientsFailed:!0});case R:return Object(ut.a)(Object(ut.a)({},e),{},{ingredientsRequest:!1,ingredients:t.payload});case N:return Object(ut.a)(Object(ut.a)({},e),{},{ingredientsRequest:!0,ingredientsFailed:!1});case S:return Object(ut.a)(Object(ut.a)({},e),{},{selectedIngredient:t.payload});case D:return Object(ut.a)(Object(ut.a)({},e),{},{selectedIngredient:null});default:return e}},orderData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ht:return Object(ut.a)(Object(ut.a)({},e),{},{orderRequest:!0,orderFailed:!1});case xt:return Object(ut.a)(Object(ut.a)({},e),{},{orderRequest:!1,orderFailed:!0});case gt:return Object(ut.a)(Object(ut.a)({},e),{},{orderRequest:!1,orderDetails:t.payload});case yt:return Object(ut.a)(Object(ut.a)({},e),{},{orderDetails:null});default:return e}},popupState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case pt:return Object(ut.a)(Object(ut.a)({},e),{},{isOrderDetailsPopupOpen:t.payload});case bt:return Object(ut.a)(Object(ut.a)({},e),{},{isIngredientsPopupOpen:t.payload});case Ot:return Object(ut.a)(Object(ut.a)({},e),{},{isOrderPopupOpen:t.payload});default:return e}},userData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:En,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case G:return Object(ut.a)(Object(ut.a)({},e),{},{registrationRequest:!0,registrationRequestFailed:!1});case B:return Object(ut.a)(Object(ut.a)({},e),{},{registrationRequest:!1,accessToken:t.payload});case z:return Object(ut.a)(Object(ut.a)({},e),{},{registrationRequest:!1,registrationRequestFailed:!0});case W:return Object(ut.a)(Object(ut.a)({},e),{},{loginRequest:!0,loginRequestFailed:!1});case H:return Object(ut.a)(Object(ut.a)({},e),{},{loginRequest:!1,accessToken:t.payload.accessToken,userData:t.payload.user});case M:return Object(ut.a)(Object(ut.a)({},e),{},{loginRequest:!1,loginRequestFailed:!0});case J:return Object(ut.a)(Object(ut.a)({},e),{},{forgotPasswordRequest:!0,forgotPasswordRequestFailed:!1});case K:return Object(ut.a)(Object(ut.a)({},e),{},{forgotPasswordRequest:!1});case X:return Object(ut.a)(Object(ut.a)({},e),{},{forgotPasswordRequest:!1,forgotPasswordRequestFailed:!0});case Z:return Object(ut.a)(Object(ut.a)({},e),{},{resetPasswordRequest:!0,resetPasswordRequestFailed:!1});case Q:return Object(ut.a)(Object(ut.a)({},e),{},{resetPasswordRequest:!1});case V:return Object(ut.a)(Object(ut.a)({},e),{},{resetPasswordRequest:!1,resetPasswordRequestFailed:!0});case Y:return Object(ut.a)(Object(ut.a)({},e),{},{getUserDataRequest:!0,getUserDataRequestFailed:!1});case $:return Object(ut.a)(Object(ut.a)({},e),{},{getUserDataRequest:!1,userData:t.payload});case ee:return Object(ut.a)(Object(ut.a)({},e),{},{getUserDataRequest:!1,getUserDataRequestFailed:!0});case ae:return Object(ut.a)(Object(ut.a)({},e),{},{logoutRequest:!0,logoutRequestFailed:!1});case ce:return Object(ut.a)(Object(ut.a)({},e),{},{logoutRequest:!1,userData:null,accessToken:null});case ie:return Object(ut.a)(Object(ut.a)({},e),{},{logoutRequest:!1,logoutRequestFailed:!0});case se:return Object(ut.a)(Object(ut.a)({},e),{},{refreshTokenRequest:!0,refreshTokenRequestFailed:!1});case oe:return Object(ut.a)(Object(ut.a)({},e),{},{refreshTokenRequest:!1,accessToken:t.payload});case le:return Object(ut.a)(Object(ut.a)({},e),{},{refreshTokenRequest:!1,refreshTokenRequestFailed:!0});case te:return Object(ut.a)(Object(ut.a)({},e),{},{sendUserDataRequest:!0,sendUserDataRequestFailed:!1});case ne:return Object(ut.a)(Object(ut.a)({},e),{},{sendUserDataRequest:!1,userData:t.payload});case re:return Object(ut.a)(Object(ut.a)({},e),{},{sendUserDataRequest:!1,sendUserDataRequestFailed:!0});case ue:return Object(ut.a)(Object(ut.a)({},e),{},{isPasswordForgot:t.payload});default:return e}},ordersData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Me:return Object(ut.a)(Object(ut.a)({},e),{},{allOrdersError:void 0,wsAllOrders:!0});case Qe:return Object(ut.a)(Object(ut.a)({},e),{},{userOrdersError:void 0,wsUserOrders:!0});case Je:return Object(ut.a)(Object(ut.a)({},e),{},{allOrdersError:t.payload,wsAllOrders:!1});case Ve:return Object(ut.a)(Object(ut.a)({},e),{},{userOrdersError:t.payload,wsUserOrders:!1});case Ke:return Object(ut.a)(Object(ut.a)({},e),{},{allOrdersError:void 0,wsAllOrders:!1,orders:[],total:0,totalToday:0});case Ye:return Object(ut.a)(Object(ut.a)({},e),{},{userOrdersError:void 0,wsUserOrders:!1,userOrders:[],total:0,totalToday:0});case Xe:return Object(ut.a)(Object(ut.a)({},e),{},{allOrdersError:void 0,orders:t.payload.orders,total:t.payload.total,totalToday:t.payload.totalToday});case $e:return Object(ut.a)(Object(ut.a)({},e),{},{allOrdersError:void 0,userOrders:t.payload.orders});case et:return Object(ut.a)(Object(ut.a)({},e),{},{orderInfoRequest:!0,orderInfoFailed:!1});case tt:return Object(ut.a)(Object(ut.a)({},e),{},{orderInfoRequest:!0,orderInfo:t.payload});case nt:return Object(ut.a)(Object(ut.a)({},e),{},{orderInfoRequest:!1,orderInfoFailed:!0});case rt:return Object(ut.a)(Object(ut.a)({},e),{},{orderInfoRequest:!1,orderInfoFailed:!1,orderInfo:null});default:return e}}}),Dn=n(120),Tn=["success"],In=function(e,t){return function(n){var r=null;return function(a){return function(c){var i,s=n.dispatch,o=n.getState,l=c.type,u=t.wsInit,d=t.onOpen,j=t.onClose,_=t.onError,p=t.onMessage,b=o().userData;l===u&&b&&(r=new WebSocket("".concat(e,"?token=").concat(null===b||void 0===b||null===(i=b.accessToken)||void 0===i?void 0:i.replace("Bearer ",""))));l===j&&r&&r.close(1e3,"CLOSE_NORMAL"),r&&(r.onopen=function(e){s({type:d,payload:e})},r.onerror=function(e){s({type:_,payload:e})},r.onmessage=function(e){var t=e.data,n=JSON.parse(t),r=(n.success,Object(dt.a)(n,Tn));s({type:p,payload:r})},r.onclose=function(e){s({type:j,payload:e})}),a(c)}}}},Cn="object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):gn.c,kn={wsInit:He,onOpen:Me,onClose:Ke,onError:Je,onMessage:Xe},wn={wsInit:Ze,onOpen:Qe,onClose:Ye,onError:Ve,onMessage:$e},qn=Cn(Object(gn.a)(Dn.a,In("wss:/norma.nomoreparties.space/orders/all",kn),In("wss://norma.nomoreparties.space/orders",wn))),Fn=Object(gn.d)(Sn,qn);i.a.render(Object(_.jsx)(a.a.StrictMode,{children:Object(_.jsx)(l.a,{children:Object(_.jsx)(ge.a,{store:Fn,children:Object(_.jsx)(xn,{})})})}),document.getElementById("root"))},22:function(e,t,n){e.exports={container:"orders-info_container__1w7rx",order_numbers:"orders-info_order_numbers__y0oFU",all_time:"orders-info_all_time__3ym8q",digits:"orders-info_digits__1BZwQ",list:"orders-info_list__1Um57",list_accent:"orders-info_list_accent__1Tmd0",numbers_container:"orders-info_numbers_container__2LFCE"}},24:function(e,t,n){e.exports={list_item:"ingredient_list_item__diaq-",moving:"ingredient_moving__5edZ5",hint_icons:"ingredient_hint_icons__rU8J1",left_click_icon:"ingredient_left_click_icon__4SqWB",right_click_icon:"ingredient_right_click_icon__2NAn6",drag_icon:"ingredient_drag_icon__mpW7A",image:"ingredient_image__gLmz8",price_info:"ingredient_price_info__1IWXs",text:"ingredient_text__cAlDL",link:"ingredient_link__26CAw"}},28:function(e,t,n){e.exports={link:"order-component_link__2ec9I",header:"order-component_header__1kDjo",footer:"order-component_footer__AgRx2",ingredients_list:"order-component_ingredients_list__2cpOi",ingredients_list_item:"order-component_ingredients_list_item__3s0VD",ingredients_list_item_image:"order-component_ingredients_list_item_image__1k7HX",total:"order-component_total__i0GOf"}},29:function(e,t,n){e.exports={container:"ingredient-details_container__1ZFLd",list:"ingredient-details_list__2nkKo",listItem:"ingredient-details_listItem__go-FH",title:"ingredient-details_title__nbDdr",header:"ingredient-details_header__2COJg",closeButton:"ingredient-details_closeButton__2YrT1"}},33:function(e,t,n){e.exports={main_container:"burger-ingredients_main_container__1ypSr",list:"burger-ingredients_list__28pax",ingredients_container:"burger-ingredients_ingredients_container__V2yiM"}},37:function(e,t,n){e.exports={wrapper:"login_wrapper__z3SCo",form:"login_form__1jN_L",link:"login_link__2g61-"}},44:function(e,t,n){e.exports={wrapper:"register_wrapper__2_p36",form:"register_form__22wC4",link:"register_link___7MeK"}},45:function(e,t,n){e.exports={wrapper:"forgot-password_wrapper__1BAgh",form:"forgot-password_form__3AcZf",link:"forgot-password_link__a7Kgr"}},46:function(e,t,n){e.exports={wrapper:"reset-password_wrapper__5KXO1",form:"reset-password_form__2iWHJ",link:"reset-password_link__38aOa"}},47:function(e,t,n){e.exports={list:"burger-constructor_list__I6ezH",constructor_container:"burger-constructor_constructor_container__3nAJ9",button_container:"burger-constructor_button_container__1r4sm"}},48:function(e,t,n){e.exports={container:"modal_container__3Uihb",title:"modal_title__MEoQp",header:"modal_header__3fbro",closeButton:"modal_closeButton__3qeWl"}},59:function(e,t,n){e.exports={title:"order-details_title__2JbNf",text:"order-details_text__3PxFh",container:"order-details_container__3KS0F",header:"order-details_header__G-UoV",closeButton:"order-details_closeButton__LegxB"}},60:function(e,t,n){e.exports={main_container:"orders-list_main_container__1Wjfg",orders_container:"orders-list_orders_container__K0tHM",list:"orders-list_list__18RuD"}},82:function(e,t,n){e.exports={loader_container:"loader_loader_container__3u45p",loader:"loader_loader__qnhLB",rotate:"loader_rotate__jeH32"}},83:function(e,t,n){e.exports={form:"profile-form_form__3LLtT",buttons_container:"profile-form_buttons_container__2ptts"}},84:function(e,t,n){e.exports={wrapper:"not-found_wrapper__1cwE9",link:"not-found_link__3d0C9"}}},[[210,1,2]]]);
//# sourceMappingURL=main.443f2c64.chunk.js.map